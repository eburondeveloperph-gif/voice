{"version":3,"sources":["../../../src/lib/ev/audit.ts","../../../src/lib/ev/cors.ts","../../../node_modules/date-fns/constants.js","../../../node_modules/date-fns/constructFrom.js","../../../node_modules/date-fns/toDate.js","../../../node_modules/date-fns/addMinutes.js","../../../node_modules/date-fns/subMinutes.js","../../../src/lib/ev/rate-limit.ts","../../../src/lib/ev/tenant.ts","../../../src/lib/ev/http.ts","../../../src/lib/ev/handler.ts","../../../src/lib/defaultAgent.ts","../../../src/lib/ev/vapi-client.ts"],"sourcesContent":["import type { GatewayAction, TenantContext } from \"@/lib/ev/types\";\nimport { prisma } from \"@/lib/db\";\n\nexport async function writeAuditLog(input: {\n  context: TenantContext;\n  action: GatewayAction;\n  method: string;\n  path: string;\n  statusCode: number;\n  resourceId?: string;\n  ipAddress?: string;\n  userAgent?: string;\n}): Promise<void> {\n  const { context, action, method, path, statusCode, resourceId, ipAddress, userAgent } = input;\n  await prisma.gatewayAuditLog.create({\n    data: {\n      orgId: context.org.id,\n      userId: context.user.id,\n      requestType: action,\n      method,\n      path,\n      statusCode,\n      success: statusCode >= 200 && statusCode < 400,\n      resourceId,\n      ipAddress,\n      userAgent,\n    },\n  });\n}\n","import { NextRequest, NextResponse } from \"next/server\";\n\nimport { env } from \"@/lib/env\";\n\nexport function assertAllowedOrigin(req: NextRequest): string | undefined {\n  const origin = req.headers.get(\"origin\") ?? undefined;\n\n  // Non-browser clients usually omit origin.\n  if (!origin) {\n    return undefined;\n  }\n\n  if (!env.allowedOrigins.includes(origin)) {\n    throw Object.assign(new Error(\"Origin is not allowed.\"), { status: 403 });\n  }\n\n  return origin;\n}\n\nexport function withCors(res: NextResponse, origin?: string): NextResponse {\n  const allowOrigin = origin && env.allowedOrigins.includes(origin) ? origin : env.allowedOrigins[0] ?? \"*\";\n  res.headers.set(\"Access-Control-Allow-Origin\", allowOrigin);\n  res.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n  res.headers.set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-Org-Id, X-User-Id\");\n  res.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PATCH, OPTIONS\");\n  res.headers.set(\"Vary\", \"Origin\");\n  return res;\n}\n\nexport function preflight(origin?: string): NextResponse {\n  return withCors(new NextResponse(null, { status: 204 }), origin);\n}\n","/**\n * @module constants\n * @summary Useful constants\n * @description\n * Collection of useful date constants.\n *\n * The constants could be imported from `date-fns/constants`:\n *\n * ```ts\n * import { maxTime, minTime } from \"./constants/date-fns/constants\";\n *\n * function isAllowedTime(time) {\n *   return time <= maxTime && time >= minTime;\n * }\n * ```\n */\n\n/**\n * @constant\n * @name daysInWeek\n * @summary Days in 1 week.\n */\nexport const daysInWeek = 7;\n\n/**\n * @constant\n * @name daysInYear\n * @summary Days in 1 year.\n *\n * @description\n * How many days in a year.\n *\n * One years equals 365.2425 days according to the formula:\n *\n * > Leap year occurs every 4 years, except for years that are divisible by 100 and not divisible by 400.\n * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days\n */\nexport const daysInYear = 365.2425;\n\n/**\n * @constant\n * @name maxTime\n * @summary Maximum allowed time.\n *\n * @example\n * import { maxTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = 8640000000000001 <= maxTime;\n * //=> false\n *\n * new Date(8640000000000001);\n * //=> Invalid Date\n */\nexport const maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n\n/**\n * @constant\n * @name minTime\n * @summary Minimum allowed time.\n *\n * @example\n * import { minTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = -8640000000000001 >= minTime;\n * //=> false\n *\n * new Date(-8640000000000001)\n * //=> Invalid Date\n */\nexport const minTime = -maxTime;\n\n/**\n * @constant\n * @name millisecondsInWeek\n * @summary Milliseconds in 1 week.\n */\nexport const millisecondsInWeek = 604800000;\n\n/**\n * @constant\n * @name millisecondsInDay\n * @summary Milliseconds in 1 day.\n */\nexport const millisecondsInDay = 86400000;\n\n/**\n * @constant\n * @name millisecondsInMinute\n * @summary Milliseconds in 1 minute\n */\nexport const millisecondsInMinute = 60000;\n\n/**\n * @constant\n * @name millisecondsInHour\n * @summary Milliseconds in 1 hour\n */\nexport const millisecondsInHour = 3600000;\n\n/**\n * @constant\n * @name millisecondsInSecond\n * @summary Milliseconds in 1 second\n */\nexport const millisecondsInSecond = 1000;\n\n/**\n * @constant\n * @name minutesInYear\n * @summary Minutes in 1 year.\n */\nexport const minutesInYear = 525600;\n\n/**\n * @constant\n * @name minutesInMonth\n * @summary Minutes in 1 month.\n */\nexport const minutesInMonth = 43200;\n\n/**\n * @constant\n * @name minutesInDay\n * @summary Minutes in 1 day.\n */\nexport const minutesInDay = 1440;\n\n/**\n * @constant\n * @name minutesInHour\n * @summary Minutes in 1 hour.\n */\nexport const minutesInHour = 60;\n\n/**\n * @constant\n * @name monthsInQuarter\n * @summary Months in 1 quarter.\n */\nexport const monthsInQuarter = 3;\n\n/**\n * @constant\n * @name monthsInYear\n * @summary Months in 1 year.\n */\nexport const monthsInYear = 12;\n\n/**\n * @constant\n * @name quartersInYear\n * @summary Quarters in 1 year\n */\nexport const quartersInYear = 4;\n\n/**\n * @constant\n * @name secondsInHour\n * @summary Seconds in 1 hour.\n */\nexport const secondsInHour = 3600;\n\n/**\n * @constant\n * @name secondsInMinute\n * @summary Seconds in 1 minute.\n */\nexport const secondsInMinute = 60;\n\n/**\n * @constant\n * @name secondsInDay\n * @summary Seconds in 1 day.\n */\nexport const secondsInDay = secondsInHour * 24;\n\n/**\n * @constant\n * @name secondsInWeek\n * @summary Seconds in 1 week.\n */\nexport const secondsInWeek = secondsInDay * 7;\n\n/**\n * @constant\n * @name secondsInYear\n * @summary Seconds in 1 year.\n */\nexport const secondsInYear = secondsInDay * daysInYear;\n\n/**\n * @constant\n * @name secondsInMonth\n * @summary Seconds in 1 month\n */\nexport const secondsInMonth = secondsInYear / 12;\n\n/**\n * @constant\n * @name secondsInQuarter\n * @summary Seconds in 1 quarter.\n */\nexport const secondsInQuarter = secondsInMonth * 3;\n\n/**\n * @constant\n * @name constructFromSymbol\n * @summary Symbol enabling Date extensions to inherit properties from the reference date.\n *\n * The symbol is used to enable the `constructFrom` function to construct a date\n * using a reference date and a value. It allows to transfer extra properties\n * from the reference date to the new date. It's useful for extensions like\n * [`TZDate`](https://github.com/date-fns/tz) that accept a time zone as\n * a constructor argument.\n */\nexport const constructFromSymbol = Symbol.for(\"constructDateFrom\");\n","import { constructFromSymbol } from \"./constants.js\";\n\n/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * Starting from v3.7.0, it allows to construct a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from \"./constructFrom/date-fns\";\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date>(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use constructor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   );\n * }\n */\nexport function constructFrom(date, value) {\n  if (typeof date === \"function\") return date(value);\n\n  if (date && typeof date === \"object\" && constructFromSymbol in date)\n    return date[constructFromSymbol](value);\n\n  if (date instanceof Date) return new date.constructor(value);\n\n  return new Date(value);\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","import { constructFrom } from \"./constructFrom.js\";\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * Starting from v3.7.0, it clones a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument, context) {\n  // [TODO] Get rid of `toDate` or `constructFrom`?\n  return constructFrom(context || argument, argument);\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n","import { millisecondsInMinute } from \"./constants.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addMinutes} function options.\n */\n\n/**\n * @name addMinutes\n * @category Minute Helpers\n * @summary Add the specified number of minutes to the given date.\n *\n * @description\n * Add the specified number of minutes to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of minutes to be added.\n * @param options - An object with options\n *\n * @returns The new date with the minutes added\n *\n * @example\n * // Add 30 minutes to 10 July 2014 12:00:00:\n * const result = addMinutes(new Date(2014, 6, 10, 12, 0), 30)\n * //=> Thu Jul 10 2014 12:30:00\n */\nexport function addMinutes(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  _date.setTime(_date.getTime() + amount * millisecondsInMinute);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addMinutes;\n","import { addMinutes } from \"./addMinutes.js\";\n\n/**\n * The {@link subMinutes} function options.\n */\n\n/**\n * @name subMinutes\n * @category Minute Helpers\n * @summary Subtract the specified number of minutes from the given date.\n *\n * @description\n * Subtract the specified number of minutes from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of minutes to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the minutes subtracted\n *\n * @example\n * // Subtract 30 minutes from 10 July 2014 12:00:00:\n * const result = subMinutes(new Date(2014, 6, 10, 12, 0), 30)\n * //=> Thu Jul 10 2014 11:30:00\n */\nexport function subMinutes(date, amount, options) {\n  return addMinutes(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subMinutes;\n","import { subMinutes } from \"date-fns\";\n\nimport { prisma } from \"@/lib/db\";\nimport { env } from \"@/lib/env\";\n\nexport type RateLimitVerdict =\n  | { allowed: true }\n  | { allowed: false; status: number; message: string };\n\nexport async function checkRateLimit(orgId: string, userId: string): Promise<RateLimitVerdict> {\n  const now = new Date();\n  const minuteAgo = subMinutes(now, 1);\n  const tenMinutesAgo = subMinutes(now, 10);\n\n  const [userPerMinute, orgPerMinute, userFailedRecent, orgFailedRecent] = await Promise.all([\n    prisma.gatewayAuditLog.count({\n      where: {\n        orgId,\n        userId,\n        createdAt: { gte: minuteAgo },\n      },\n    }),\n    prisma.gatewayAuditLog.count({\n      where: {\n        orgId,\n        createdAt: { gte: minuteAgo },\n      },\n    }),\n    prisma.gatewayAuditLog.count({\n      where: {\n        orgId,\n        userId,\n        success: false,\n        createdAt: { gte: tenMinutesAgo },\n      },\n    }),\n    prisma.gatewayAuditLog.count({\n      where: {\n        orgId,\n        success: false,\n        createdAt: { gte: tenMinutesAgo },\n      },\n    }),\n  ]);\n\n  if (userPerMinute >= env.EV_RATE_LIMIT_USER_PER_MINUTE) {\n    return { allowed: false, status: 429, message: \"User request limit reached.\" };\n  }\n\n  if (orgPerMinute >= env.EV_RATE_LIMIT_ORG_PER_MINUTE) {\n    return { allowed: false, status: 429, message: \"Org request limit reached.\" };\n  }\n\n  if (\n    userFailedRecent >= env.EV_RATE_LIMIT_FAILED_PER_10_MIN ||\n    orgFailedRecent >= env.EV_RATE_LIMIT_FAILED_PER_10_MIN * 3\n  ) {\n    return { allowed: false, status: 403, message: \"Suspicious activity detected.\" };\n  }\n\n  return { allowed: true };\n}\n","import { type NextRequest } from \"next/server\";\n\nimport { prisma } from \"@/lib/db\";\nimport { env } from \"@/lib/env\";\nimport type { TenantContext } from \"@/lib/ev/types\";\n\nexport async function resolveTenant(req: NextRequest): Promise<TenantContext> {\n  const headerOrgId = req.headers.get(\"x-org-id\")?.trim();\n  const headerUserId = req.headers.get(\"x-user-id\")?.trim();\n\n  let org = headerOrgId\n    ? await prisma.org.findUnique({ where: { id: headerOrgId } })\n    : await prisma.org.findUnique({ where: { slug: env.EV_DEFAULT_ORG_SLUG } });\n\n  if (!org) {\n    org = await prisma.org.create({\n      data: {\n        id: headerOrgId || undefined,\n        slug: env.EV_DEFAULT_ORG_SLUG,\n        name: env.EV_DEFAULT_ORG_NAME,\n      },\n    });\n  }\n\n  let user = headerUserId\n    ? await prisma.user.findUnique({ where: { id: headerUserId } })\n    : await prisma.user.findFirst({ where: { orgId: org.id, email: env.EV_DEFAULT_USER_EMAIL } });\n\n  if (!user) {\n    user = await prisma.user.create({\n      data: {\n        id: headerUserId || undefined,\n        orgId: org.id,\n        email: env.EV_DEFAULT_USER_EMAIL,\n        displayName: \"Workspace Owner\",\n      },\n    });\n  }\n\n  if (user.orgId !== org.id) {\n    throw Object.assign(new Error(\"User does not belong to this org.\"), { status: 403 });\n  }\n\n  return { org, user };\n}\n","import { NextRequest, NextResponse } from \"next/server\";\n\nimport { assertAllowedOrigin, withCors } from \"@/lib/ev/cors\";\nimport { checkRateLimit } from \"@/lib/ev/rate-limit\";\nimport { resolveTenant } from \"@/lib/ev/tenant\";\nimport type { GatewayAction, TenantContext } from \"@/lib/ev/types\";\n\nexport type GatewayRequestContext = {\n  tenant: TenantContext;\n  origin?: string;\n  ipAddress?: string;\n  userAgent?: string;\n};\n\nexport async function authorizeGatewayRequest(req: NextRequest): Promise<GatewayRequestContext> {\n  const origin = assertAllowedOrigin(req);\n  const tenant = await resolveTenant(req);\n  const ipAddress = req.headers.get(\"x-forwarded-for\")?.split(\",\")[0]?.trim() ?? undefined;\n  const userAgent = req.headers.get(\"user-agent\") ?? undefined;\n\n  const rate = await checkRateLimit(tenant.org.id, tenant.user.id);\n  if (!rate.allowed) {\n    throw Object.assign(new Error(rate.message), { status: rate.status });\n  }\n\n  return { tenant, origin, ipAddress, userAgent };\n}\n\nexport function okJson<T>(payload: T, origin?: string, status = 200): NextResponse {\n  return withCors(NextResponse.json(payload, { status }), origin);\n}\n\nexport function errorJson(\n  error: unknown,\n  origin?: string,\n  fallbackStatus = 500,\n  action?: GatewayAction,\n): NextResponse {\n  const anyError = error as { message?: string; status?: number; details?: unknown };\n  const status = anyError.status ?? fallbackStatus;\n  const payload = {\n    error: anyError.message ?? \"Unexpected gateway error.\",\n    action,\n    details: anyError.details,\n  };\n  return withCors(NextResponse.json(payload, { status }), origin);\n}\n","import { NextRequest, NextResponse } from \"next/server\";\n\nimport { writeAuditLog } from \"@/lib/ev/audit\";\nimport { preflight } from \"@/lib/ev/cors\";\nimport { authorizeGatewayRequest, errorJson, okJson, type GatewayRequestContext } from \"@/lib/ev/http\";\nimport type { GatewayAction } from \"@/lib/ev/types\";\n\ntype HandlerResult = {\n  payload: unknown;\n  status?: number;\n  resourceId?: string;\n};\n\nexport async function runGatewayHandler(\n  req: NextRequest,\n  action: GatewayAction,\n  handler: (ctx: GatewayRequestContext) => Promise<HandlerResult>,\n): Promise<NextResponse> {\n  let ctx: GatewayRequestContext | null = null;\n\n  try {\n    ctx = await authorizeGatewayRequest(req);\n    const result = await handler(ctx);\n\n    await writeAuditLog({\n      context: ctx.tenant,\n      action,\n      method: req.method,\n      path: req.nextUrl.pathname,\n      statusCode: result.status ?? 200,\n      resourceId: result.resourceId,\n      ipAddress: ctx.ipAddress,\n      userAgent: ctx.userAgent,\n    });\n\n    return okJson(result.payload, ctx.origin, result.status ?? 200);\n  } catch (error) {\n    const statusCode = (error as { status?: number }).status ?? 500;\n\n    if (ctx) {\n      await writeAuditLog({\n        context: ctx.tenant,\n        action,\n        method: req.method,\n        path: req.nextUrl.pathname,\n        statusCode,\n        ipAddress: ctx.ipAddress,\n        userAgent: ctx.userAgent,\n      });\n    }\n\n    return errorJson(error, ctx?.origin, statusCode, action);\n  }\n}\n\nexport function runGatewayOptions(req: NextRequest): NextResponse {\n  const origin = req.headers.get(\"origin\") ?? undefined;\n  return preflight(origin);\n}\n","/**\n * Default Vapi assistant configuration.\n * Used as a fallback when no org-specific agent is configured\n * and when initialising new calls without an explicit assistantId.\n */\n\nexport const DEFAULT_AGENT_ID = \"default-agent\";\n\nexport const DEFAULT_AGENT_ORG_ID = \"default-org\";\n\nexport const DEFAULT_AGENT_PHONE = \"+1 (844) 418 2027\";\nexport const DEFAULT_AGENT_PHONE_ID = \"default-phone\";\n\n/** Full Vapi assistant payload — kept in sync with the upstream record. */\nexport const DEFAULT_AGENT = {\n    id: DEFAULT_AGENT_ID,\n    orgId: DEFAULT_AGENT_ORG_ID,\n    name: \"Stephen\",\n    voice: {\n        voiceId: \"orbit-emma\",\n        provider: \"eburon\",\n    },\n    createdAt: \"2026-02-16T08:30:48.152Z\",\n    updatedAt: \"2026-02-17T13:42:10.923Z\",\n    model: {\n        model: \"gpt-4o-mini\",\n        messages: [\n            {\n                role: \"system\",\n                content: `[Identity]  \nYou are Stephen, a business development voice assistant for Eburon Tech, a B2B software solutions provider. Your primary purpose is to identify qualified leads, understand their business challenges, and connect them with the appropriate sales representatives for solutions that match their needs.\n\n[Voice & Persona]  \n- Sound friendly, consultative, and genuinely interested in the prospect's business.  \n- Convey confidence and expertise without being pushy or aggressive.  \n- Project a helpful, solution-oriented approach rather than a traditional \"sales\" persona.  \n- Balance professionalism with approachable warmth.  \n\n[Speech Characteristics]  \n- Use a conversational business tone with natural contractions (we're, I'd, they've) and integrate natural human nuances like brief laughter, throat clearing, sighs, and correcting yourself with phrases like, \"ahm, I should say...\"  \n- Include thoughtful pauses and sometimes double-read words for emphasis.  \n- Vary your pacing—speak more deliberately when discussing important points.  \n- Employ occasional business phrases naturally (e.g., \"let's circle back to,\" \"drill down on that\").  \n\n[Conversation Flow]  \n\n[Introduction]  \nBegin with: \"Hello, ahm, this is Stephen from Eburon Tech. We help businesses improve their operational efficiency through custom software solutions. Do—um, do you have a few minutes to chat about how we might be able to help your business?\"  \nIf they sound busy or hesitant: \"I understand you're busy. Would it be better if I called at another time? My goal is just to—uh, learn about your business challenges and see if our solutions might fit.\"\n\n[Need Discovery]  \n1. Industry understanding: \"Could you tell me a bit about your business and the industry you operate in?\"  \n2. Current situation: \"What systems or processes are you currently using to manage your [relevant business area]?\"  \n3. Pain points: \"What are the biggest challenges you're facing with your current approach?\"  \n4. Impact: \"Ah, how are these challenges affecting your, um, business operations or bottom line?\"  \n5. Previous solutions: \"Have you tried other solutions to address these challenges? What was your experience?\"\n\n[Solution Alignment]  \n1. Highlight relevant capabilities: \"Based on what you've shared, our [specific solution] could help address your [specific pain point] by [benefit].\"  \n2. Success stories: \"We've worked with several companies in [their industry] with similar challenges. For example, one client was able to [specific result] after implementing our solution.\"  \n3. Differentiation: \"What makes our approach different is [key differentiator].\"\n\n[Qualification Assessment]  \n1. Decision timeline: \"What's your timeline for implementing a solution like this?\"  \n2. Budget exploration: \"Have you allocated budget for improving this area of your business?\"  \n3. Decision process: \"Who else would be involved in evaluating a solution like ours?\"  \n4. Success criteria: \"If you were to implement a new solution, how would you measure its success?\"\n\n[Next Steps]  \n- For qualified prospects: \"Based on our conversation, I think it would be valuable to have you speak with [appropriate sales representative], who specializes in [relevant area]. They can provide a more tailored overview of how we could help with [specific challenges mentioned]. Would you be available for a 30-minute call [suggest specific times]?\"  \n- For prospects needing nurturing: \"It sounds like the timing might not be ideal right now... Would it be helpful if um, I sent you some information about how we've helped similar businesses in your industry? Then perhaps we could reconnect in [timeframe].\"  \n- For unqualified leads: \"Based on what you've shared, it sounds like our solutions might not be the best fit for your current needs. We typically work best with companies that [ideal customer profile]. To be respectful of your time, I won't suggest moving forward, but if your situation changes, especially regarding [qualifying factor], please reach out.\"\n\n[Closing]  \nEnd with: \"Thank you for taking the time to chat today. [Personalized closing based on outcome]. Ah, have a great day!\"\n\n[Response Guidelines]  \n- Keep initial responses under 30 words, expanding only when providing valuable information.  \n- Ask one question at a time, allowing the prospect to fully respond.  \n- Acknowledge and reference prospect's previous answers to show active listening.  \n- Use affirming language: \"That's a great point,\" \"I understand exactly what you mean.\"\n\n[Scenario Handling]  \n\n- [For Interested But Busy Prospects]: Acknowledge their time constraints: \"I understand you're pressed for time.\" Offer flexibility: \"Would it be better to, um, schedule a specific time for us to talk?\"  \n- [For Skeptical Prospects]: Acknowledge skepticism: \"I understand you might be hesitant, and that's completely reasonable.\" Address objections specifically: \"That's a common concern. Here's how we typically address that...\"  \n- [For Information Gatherers]: Identify their stage: \"Are you actively evaluating solutions now, or just beginning to explore options?\" Provide valuable insights: \"One thing many businesses in your position don't initially consider is...\"  \n- [For Unqualified Prospects]: Recognize the mismatch honestly: \"Based on what you've shared, I don't think we'd be the right solution for you at this time.\"\n\n[Knowledge Base]  \n\n- Eburon Tech offers three core solutions: OperationsOS (workflow automation), InsightAnalytics (data analysis), and CustomerConnect (client relationship management).  \n- Our solutions are most suitable for mid-market businesses with 50-500 employees.  \n- Implementation typically takes 4-8 weeks depending on customization needs.  \n- Solutions are available in tiered pricing models based on user count and feature requirements.  \n- All solutions include dedicated implementation support and ongoing customer service.\n\n[Response Refinement]  \n- When discussing ROI, use specific examples: \"Companies similar to yours typically see a 30% reduction in processing time within the first three months.\"  \n- For technical questions beyond your knowledge: \"That's an excellent technical question. Our solution architects would be best positioned to give you a comprehensive answer during the next step in our process.\"\n\n[Call Management]  \n- If the conversation goes off-track: \"That's an interesting point about [tangent topic]. To make sure I'm addressing your main business needs, could we circle back to [relevant qualification topic]?\"  \n- If you need clarification: \"Just so I'm understanding correctly, you mentioned [point needing clarification]. Could you elaborate on that a bit more?\"  \n- If technical difficulties occur: \"I apologize for the connection issue. You were telling me about [last clear topic]. Please continue from there.\"`,\n            },\n        ],\n        provider: \"openai\",\n    },\n    firstMessage: \"Hello, this is Stephen from Eburon tech. How is it going?\",\n    firstMessageMode: \"assistant-waits-for-user\",\n    voicemailMessage:\n        \"Hello, this is Stephen from GrowthPartners. I'm calling to discuss how our solutions might help your business operations. I'll try reaching you again, or feel free to call us back at your convenience.\",\n    endCallMessage:\n        \"Thank you for taking the time to discuss your needs with me today. Our team will be in touch with more information soon. Have a great day!\",\n    transcriber: {\n        model: \"gemini-2.0-flash-lite\",\n        language: \"Multilingual\",\n        provider: \"google\",\n    },\n    backgroundSound: \"office\",\n    backgroundDenoisingEnabled: true,\n    analysisPlan: {\n        summaryPlan: { enabled: false },\n        successEvaluationPlan: { enabled: false },\n    },\n    compliancePlan: {\n        hipaaEnabled: false,\n        pciEnabled: false,\n    },\n    isServerUrlSecretSet: false,\n} as const;\n","import { env } from \"@/lib/env\";\nimport { DEFAULT_AGENT, DEFAULT_AGENT_ID } from \"@/lib/defaultAgent\";\n\nconst BASE_URL = \"https://api.vapi.ai\";\n\nexport type ListAssistantsQuery = {\n  limit?: number;\n  createdAtGt?: string;\n  createdAtLt?: string;\n  createdAtGe?: string;\n  createdAtLe?: string;\n  updatedAtGt?: string;\n  updatedAtLt?: string;\n  updatedAtGe?: string;\n  updatedAtLe?: string;\n};\n\nexport class GatewayUpstreamError extends Error {\n  readonly status: number;\n  readonly details: unknown;\n\n  constructor(message: string, status: number, details?: unknown) {\n    super(message);\n    this.status = status;\n    this.details = details;\n  }\n}\n\nfunction requirePrivateToken(): string {\n  const token = env.EV_PRIVATE_TOKEN?.trim();\n  if (!token) {\n    throw new GatewayUpstreamError(\"Gateway private token is not configured.\", 500);\n  }\n  return token;\n}\n\nfunction safeUrl(path: string): string {\n  const url = new URL(path, BASE_URL);\n  if (url.hostname !== \"api.vapi.ai\") {\n    throw new GatewayUpstreamError(\"Outbound host is not allowed.\", 500);\n  }\n  return url.toString();\n}\n\nfunction asBearerAuthorizationHeader(token: string): string {\n  return /^Bearer\\s+/i.test(token) ? token : `Bearer ${token}`;\n}\n\nfunction toPathSegment(value: string): string {\n  return encodeURIComponent(value.trim());\n}\n\nfunction assistantsQueryString(params?: ListAssistantsQuery): string {\n  if (!params) {\n    return \"\";\n  }\n\n  const search = new URLSearchParams();\n  const appendNumber = (key: string, value: number | undefined) => {\n    if (typeof value === \"number\" && Number.isFinite(value)) {\n      search.set(key, String(value));\n    }\n  };\n  const appendString = (key: string, value: string | undefined) => {\n    if (value && value.trim()) {\n      search.set(key, value.trim());\n    }\n  };\n\n  appendNumber(\"limit\", params.limit);\n  appendString(\"createdAtGt\", params.createdAtGt);\n  appendString(\"createdAtLt\", params.createdAtLt);\n  appendString(\"createdAtGe\", params.createdAtGe);\n  appendString(\"createdAtLe\", params.createdAtLe);\n  appendString(\"updatedAtGt\", params.updatedAtGt);\n  appendString(\"updatedAtLt\", params.updatedAtLt);\n  appendString(\"updatedAtGe\", params.updatedAtGe);\n  appendString(\"updatedAtLe\", params.updatedAtLe);\n\n  const query = search.toString();\n  return query ? `?${query}` : \"\";\n}\n\nasync function requestUpstream<T>(path: string, init: RequestInit): Promise<T> {\n  const token = requirePrivateToken();\n\n  const res = await fetch(safeUrl(path), {\n    ...init,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: asBearerAuthorizationHeader(token),\n      ...(init.headers ?? {}),\n    },\n    cache: \"no-store\",\n  });\n\n  const text = await res.text();\n  const payload = text ? safeJsonParse(text) : null;\n\n  if (!res.ok) {\n    throw new GatewayUpstreamError(`Upstream request failed for ${path}`, res.status, payload);\n  }\n\n  return payload as T;\n}\n\nfunction safeJsonParse(text: string): unknown {\n  try {\n    return JSON.parse(text);\n  } catch {\n    return { raw: text };\n  }\n}\n\nexport const upstream = {\n  listAssistants: (params?: ListAssistantsQuery) =>\n    requestUpstream<unknown[]>(`/assistant${assistantsQueryString(params)}`, { method: \"GET\" }),\n  getAssistant: (assistantId?: string) => {\n    const id = assistantId ?? env.VAPI_DEFAULT_AGENT_ID ?? DEFAULT_AGENT_ID;\n    return requestUpstream<Record<string, unknown>>(`/assistant/${toPathSegment(id)}`, { method: \"GET\" });\n  },\n  getDefaultAssistant: () => Promise.resolve(DEFAULT_AGENT),\n  createAssistant: (payload: unknown) => requestUpstream<Record<string, unknown>>(\"/assistant\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  }),\n  updateAssistant: (assistantId: string, payload: unknown) =>\n    requestUpstream<Record<string, unknown>>(`/assistant/${toPathSegment(assistantId)}`, {\n      method: \"PATCH\",\n      body: JSON.stringify(payload),\n    }),\n  listCalls: () => requestUpstream<Record<string, unknown>[]>(\"/call\", { method: \"GET\" }),\n  createCall: (payload: unknown) =>\n    requestUpstream<Record<string, unknown>>(\"/call\", {\n      method: \"POST\",\n      body: JSON.stringify(payload),\n    }),\n  listVoicesByProvider: (provider = \"vapi\") =>\n    requestUpstream<unknown>(`/voice-library/${encodeURIComponent(provider)}`, {\n      method: \"GET\",\n    }),\n  listPhoneNumbers: () => requestUpstream<Record<string, unknown>[]>(\"/phone-number\", { method: \"GET\" }),\n  createPhoneNumber: (payload: unknown) =>\n    requestUpstream<Record<string, unknown>>(\"/phone-number\", {\n      method: \"POST\",\n      body: JSON.stringify(payload),\n    }),\n  listCredentials: () => requestUpstream<Record<string, unknown>[]>(\"/credential\", { method: \"GET\" }),\n  getCredential: (credentialId: string) =>\n    requestUpstream<Record<string, unknown>>(`/credential/${toPathSegment(credentialId)}`, {\n      method: \"GET\",\n    }),\n  createCredential: (payload: unknown) =>\n    requestUpstream<Record<string, unknown>>(\"/credential\", {\n      method: \"POST\",\n      body: JSON.stringify(payload),\n    }),\n  updateCredential: (credentialId: string, payload: unknown) =>\n    requestUpstream<Record<string, unknown>>(`/credential/${toPathSegment(credentialId)}`, {\n      method: \"PATCH\",\n      body: JSON.stringify(payload),\n    }),\n  deleteCredential: (credentialId: string) =>\n    requestUpstream<Record<string, unknown> | null>(`/credential/${toPathSegment(credentialId)}`, {\n      method: \"DELETE\",\n    }),\n};\n"],"names":[],"mappings":"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","ignoreList":[2,3,4,5,6]}