{"version":3,"sources":["../../../../src/components/crm-portal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport type { Session } from \"@supabase/supabase-js\";\n\nimport { createClient, isSupabaseEnabled } from \"@/lib/supabase\";\n\ntype CrmLead = {\n  id: string;\n  fullName: string;\n  email: string | null;\n  phone: string | null;\n  company: string | null;\n  stage: \"new\" | \"contacted\" | \"qualified\" | \"proposal\" | \"won\" | \"lost\";\n  source: string | null;\n  ownerEmail: string | null;\n  notes: string | null;\n  createdAt: string;\n  updatedAt: string;\n};\n\ntype CrmFile = {\n  id: string;\n  leadId: string | null;\n  fileName: string;\n  contentType: string | null;\n  sizeBytes: number;\n  storagePath: string;\n  publicUrl: string | null;\n  uploadedByEmail: string | null;\n  createdAt: string;\n};\n\ntype CrmAgent = {\n  id: string;\n  name: string;\n  intro: string;\n  firstMessageMode: \"assistant-speaks-first\" | \"assistant-waits-for-user\";\n  description: string;\n  systemPrompt: string;\n  status: \"draft\" | \"deployed\";\n  voiceId: string;\n  voiceLabel: string;\n  voiceLocale: string;\n  updatedAt: string;\n};\n\ntype VoiceOption = {\n  id: string;\n  label: string;\n  locale: string;\n  previewSampleUrl?: string | null;\n};\n\ntype VoicePreviewConfigResponse = {\n  preview: {\n    assistantId: string;\n    publicKey: string;\n    timeoutSeconds: number;\n    assistantOverrides: Record<string, unknown>;\n  };\n};\n\ntype VapiClient = {\n  on: (event: string, listener: (...args: unknown[]) => void) => void;\n  start: (assistantId: string, assistantOverrides?: Record<string, unknown>) => Promise<unknown>;\n  stop: () => Promise<void>;\n};\n\ntype CrmCall = {\n  id: string;\n  vapiCallId: string;\n  status: string;\n  fromNumber: string | null;\n  toNumber: string | null;\n  durationSeconds: number | null;\n  costUsd: number | null;\n  startedAt: string | null;\n  recordingUrl: string | null;\n  agent: { id: string; name: string } | null;\n};\n\ntype CrmNumber = {\n  id: string;\n  displayNumber: string;\n  status: string;\n  monthlyPriceCents: number;\n  assignedAgent: { id: string; name: string } | null;\n};\n\ntype BillingSummary = {\n  balanceCents: number;\n  monthlyPhoneCostCents: number;\n  entryCount: number;\n};\n\ntype BillingEntry = {\n  id: string;\n  entryType: string;\n  amountCents: number;\n  description: string;\n  referenceId: string | null;\n  metadata: unknown;\n  createdAt: string;\n};\n\ntype BootstrapPayload = {\n  project: {\n    id: string;\n    name: string;\n    slug: string;\n    customDomain: string | null;\n    description: string | null;\n    logoUrl: string | null;\n  };\n  leads: CrmLead[];\n  files: CrmFile[];\n};\n\ntype ProjectDetailsPayload = {\n  project: {\n    id: string;\n    name: string;\n    slug: string;\n    customDomain: string | null;\n    description: string | null;\n    logoUrl: string | null;\n    embedStatus: string | null;\n    updatedAt: string;\n  };\n};\n\ntype AgentsPayload = {\n  agents: CrmAgent[];\n  voices: VoiceOption[];\n};\n\ntype CallsPayload = {\n  calls: CrmCall[];\n};\n\ntype NumbersPayload = {\n  numbers: CrmNumber[];\n};\n\ntype BillingPayload = {\n  summary: BillingSummary;\n  entries: BillingEntry[];\n};\n\ntype PortalProps = {\n  clientSlug: string;\n  projectName: string;\n  projectDescription: string | null;\n  logoUrl: string | null;\n};\n\ntype TabId = \"dashboard\" | \"agents\" | \"calls\" | \"leads\" | \"files\" | \"settings\";\ntype EmbedState = \"disabled\" | \"requested\" | \"approved\";\n\nconst STAGE_OPTIONS: Array<CrmLead[\"stage\"]> = [\"new\", \"contacted\", \"qualified\", \"proposal\", \"won\", \"lost\"];\nconst AUTO_SIP_NUMBER_OPTION = \"__auto_vapi_sip__\";\n\nconst TAB_SUBTITLES: Record<TabId, string> = {\n  dashboard: \"A quick glance at your recent activity.\",\n  agents: \"Create and manage agents generated inside this client CRM.\",\n  calls: \"Client call logs filtered to this CRM, including recordings.\",\n  leads: \"Manage and convert your prospective clients.\",\n  files: \"Secure document and asset tracking.\",\n  settings: \"Manage branding, billing, numbers, and embed settings.\",\n};\n\nfunction normalizeEmbedState(value: string | null | undefined): EmbedState | null {\n  if (value === \"disabled\" || value === \"requested\" || value === \"approved\") {\n    return value;\n  }\n  return null;\n}\n\nfunction formatMoney(cents: number): string {\n  return `$${(cents / 100).toFixed(2)}`;\n}\n\nfunction formatDate(value: string | null): string {\n  if (!value) {\n    return \"-\";\n  }\n  const parsed = new Date(value);\n  if (Number.isNaN(parsed.valueOf())) {\n    return \"-\";\n  }\n  return parsed.toLocaleString();\n}\n\nasync function crmJsonRequest<T>(slug: string, path: string, token: string, init?: RequestInit): Promise<T> {\n  const res = await fetch(`/api/crm/${encodeURIComponent(slug)}${path}`, {\n    ...init,\n    headers: {\n      Authorization: `Bearer ${token}`,\n      ...(init?.headers ?? {}),\n    },\n  });\n  const payload = await res.json().catch(() => ({}));\n  if (!res.ok) {\n    const message = typeof payload?.error === \"string\" ? payload.error : `Request failed (${res.status})`;\n    throw new Error(message);\n  }\n  return payload as T;\n}\n\nexport function CrmPortal({ clientSlug, projectName, projectDescription, logoUrl }: PortalProps) {\n  const [email, setEmail] = useState(\"\");\n  const [session, setSession] = useState<Session | null>(null);\n  const [authReady, setAuthReady] = useState(false);\n  const [status, setStatus] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState<TabId>(\"dashboard\");\n  const [embedState, setEmbedState] = useState<EmbedState | null>(null);\n  const [origin, setOrigin] = useState(\"\");\n\n  const [projectInfo, setProjectInfo] = useState({\n    name: projectName,\n    description: projectDescription,\n    logoUrl,\n  });\n\n  const [leads, setLeads] = useState<CrmLead[]>([]);\n  const [files, setFiles] = useState<CrmFile[]>([]);\n  const [agents, setAgents] = useState<CrmAgent[]>([]);\n  const [voiceOptions, setVoiceOptions] = useState<VoiceOption[]>([]);\n  const [calls, setCalls] = useState<CrmCall[]>([]);\n  const [numbers, setNumbers] = useState<CrmNumber[]>([]);\n  const [billingSummary, setBillingSummary] = useState<BillingSummary | null>(null);\n  const [billingEntries, setBillingEntries] = useState<BillingEntry[]>([]);\n\n  const [leadForm, setLeadForm] = useState({\n    fullName: \"\",\n    email: \"\",\n    phone: \"\",\n    company: \"\",\n    source: \"\",\n    notes: \"\",\n  });\n  const [uploadLeadId, setUploadLeadId] = useState(\"\");\n  const [uploadFile, setUploadFile] = useState<File | null>(null);\n\n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoUploading, setLogoUploading] = useState(false);\n\n  const [newAgentForm, setNewAgentForm] = useState({\n    name: \"\",\n    intro: \"\",\n    firstMessageMode: \"assistant-speaks-first\" as \"assistant-speaks-first\" | \"assistant-waits-for-user\",\n    systemPrompt: \"\",\n    voiceId: \"\",\n    phoneSelection: \"\",\n    numberDesiredAreaCode: \"\",\n  });\n  const [creatingAgent, setCreatingAgent] = useState(false);\n  const [editingAgentId, setEditingAgentId] = useState<string | null>(null);\n  const [editingAgentForm, setEditingAgentForm] = useState({\n    name: \"\",\n    intro: \"\",\n    firstMessageMode: \"assistant-speaks-first\" as \"assistant-speaks-first\" | \"assistant-waits-for-user\",\n    systemPrompt: \"\",\n    voiceId: \"\",\n  });\n  const [updatingAgent, setUpdatingAgent] = useState(false);\n\n  const [numberForm, setNumberForm] = useState({\n    country: \"US\",\n    areaCode: \"\",\n    assignAgentId: \"\",\n  });\n  const [buyingNumber, setBuyingNumber] = useState(false);\n\n  const [callQuery, setCallQuery] = useState(\"\");\n  const [previewingVoice, setPreviewingVoice] = useState(false);\n  const [playingVoiceId, setPlayingVoiceId] = useState<string | null>(null);\n  const voicePreviewAudioRef = useRef<HTMLAudioElement | null>(null);\n  const voicePreviewTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const voicePreviewClientRef = useRef<VapiClient | null>(null);\n\n  const accessToken = session?.access_token ?? null;\n\n  const leadsById = useMemo(() => new Map(leads.map((lead) => [lead.id, lead])), [leads]);\n  const numberByAgentId = useMemo(() => {\n    const mapping = new Map<string, string>();\n    for (const number of numbers) {\n      if (number.assignedAgent?.id) {\n        mapping.set(number.assignedAgent.id, number.displayNumber);\n      }\n    }\n    return mapping;\n  }, [numbers]);\n\n  useEffect(() => {\n    const sb = createClient();\n    if (!sb) {\n      setAuthReady(true);\n      setStatus(\"Supabase auth is not configured. Please set Supabase env vars.\");\n      return;\n    }\n\n    let active = true;\n    sb.auth\n      .getSession()\n      .then(({ data }) => {\n        if (active) {\n          setSession(data.session);\n        }\n      })\n      .finally(() => {\n        if (active) setAuthReady(true);\n      });\n\n    const { data: subscription } = sb.auth.onAuthStateChange((_event, nextSession) => {\n      setSession(nextSession);\n    });\n\n    return () => {\n      active = false;\n      subscription.subscription.unsubscribe();\n    };\n  }, []);\n\n  useEffect(() => {\n    setOrigin(window.location.origin);\n  }, []);\n\n  useEffect(() => {\n    if (!voiceOptions.length) return;\n    setNewAgentForm((prev) => (prev.voiceId ? prev : { ...prev, voiceId: voiceOptions[0].id }));\n  }, [voiceOptions]);\n\n  useEffect(() => {\n    if (!agents.length) return;\n    setNumberForm((prev) => (prev.assignAgentId ? prev : { ...prev, assignAgentId: agents[0].id }));\n  }, [agents]);\n\n  useEffect(() => {\n    if (!editingAgentId) {\n      return;\n    }\n    const stillExists = agents.some((agent) => agent.id === editingAgentId);\n    if (!stillExists) {\n      setEditingAgentId(null);\n    }\n  }, [agents, editingAgentId]);\n\n  const stopVoicePreview = useCallback(async () => {\n    if (voicePreviewTimeoutRef.current) {\n      clearTimeout(voicePreviewTimeoutRef.current);\n      voicePreviewTimeoutRef.current = null;\n    }\n\n    const audio = voicePreviewAudioRef.current;\n    if (audio) {\n      audio.pause();\n      audio.currentTime = 0;\n    }\n\n    if (voicePreviewClientRef.current) {\n      try {\n        await voicePreviewClientRef.current.stop();\n      } catch {\n        // ignore stop errors\n      } finally {\n        voicePreviewClientRef.current = null;\n      }\n    }\n\n    setPlayingVoiceId(null);\n  }, []);\n\n  useEffect(\n    () => () => {\n      void stopVoicePreview();\n    },\n    [stopVoicePreview],\n  );\n\n  const loadBootstrapData = useCallback(\n    async (token: string) => {\n      const payload = await crmJsonRequest<BootstrapPayload>(clientSlug, \"/bootstrap\", token);\n      setLeads(payload.leads);\n      setFiles(payload.files);\n      setProjectInfo((prev) => ({\n        ...prev,\n        name: payload.project.name,\n        description: payload.project.description,\n        logoUrl: payload.project.logoUrl,\n      }));\n    },\n    [clientSlug],\n  );\n\n  const loadProjectDetails = useCallback(\n    async (token: string) => {\n      const payload = await crmJsonRequest<ProjectDetailsPayload>(clientSlug, \"\", token);\n      setEmbedState(normalizeEmbedState(payload.project.embedStatus));\n      setProjectInfo((prev) => ({\n        ...prev,\n        name: payload.project.name,\n        description: payload.project.description,\n        logoUrl: payload.project.logoUrl,\n      }));\n    },\n    [clientSlug],\n  );\n\n  const loadAgentsData = useCallback(\n    async (token: string) => {\n      const payload = await crmJsonRequest<AgentsPayload>(clientSlug, \"/agents\", token);\n      setAgents(payload.agents);\n      setVoiceOptions(payload.voices);\n    },\n    [clientSlug],\n  );\n\n  const loadCallsData = useCallback(\n    async (token: string, options?: { sync?: boolean }) => {\n      const params = new URLSearchParams();\n      params.set(\"sync\", options?.sync ? \"true\" : \"false\");\n      if (callQuery.trim()) {\n        params.set(\"q\", callQuery.trim());\n      }\n      const payload = await crmJsonRequest<CallsPayload>(clientSlug, `/calls?${params.toString()}`, token);\n      setCalls(payload.calls);\n    },\n    [callQuery, clientSlug],\n  );\n\n  const loadNumbersData = useCallback(\n    async (token: string) => {\n      const payload = await crmJsonRequest<NumbersPayload>(clientSlug, \"/phone-numbers\", token);\n      setNumbers(payload.numbers);\n    },\n    [clientSlug],\n  );\n\n  const loadBillingData = useCallback(\n    async (token: string) => {\n      const payload = await crmJsonRequest<BillingPayload>(clientSlug, \"/billing\", token);\n      setBillingSummary(payload.summary);\n      setBillingEntries(payload.entries);\n    },\n    [clientSlug],\n  );\n\n  const refreshPortalData = useCallback(\n    async (options?: { syncCalls?: boolean }) => {\n      if (!accessToken) return;\n      setLoading(true);\n\n      const results = await Promise.allSettled([\n        loadBootstrapData(accessToken),\n        loadProjectDetails(accessToken),\n        loadAgentsData(accessToken),\n        loadCallsData(accessToken, { sync: options?.syncCalls === true }),\n        loadNumbersData(accessToken),\n        loadBillingData(accessToken),\n      ]);\n\n      const firstError = results.find((result) => result.status === \"rejected\");\n      if (firstError && firstError.status === \"rejected\") {\n        const message = firstError.reason instanceof Error ? firstError.reason.message : \"Failed loading CRM data.\";\n        setStatus(message);\n      }\n\n      setLoading(false);\n    },\n    [\n      accessToken,\n      loadAgentsData,\n      loadBillingData,\n      loadBootstrapData,\n      loadCallsData,\n      loadNumbersData,\n      loadProjectDetails,\n    ],\n  );\n\n  useEffect(() => {\n    if (!accessToken) return;\n    void refreshPortalData();\n  }, [accessToken, refreshPortalData]);\n\n  async function sendMagicLink() {\n    const sb = createClient();\n    if (!sb) {\n      setStatus(\"Supabase auth is not configured.\");\n      return;\n    }\n    if (!email.trim()) {\n      setStatus(\"Enter your email to continue.\");\n      return;\n    }\n\n    setStatus(\"Sending sign-in link...\");\n    const { error } = await sb.auth.signInWithOtp({\n      email: email.trim().toLowerCase(),\n      options: {\n        emailRedirectTo: window.location.href,\n      },\n    });\n\n    if (error) {\n      setStatus(error.message);\n      return;\n    }\n    setStatus(\"Check your email for a secure sign-in link.\");\n  }\n\n  async function signOut() {\n    const sb = createClient();\n    if (!sb) return;\n    await sb.auth.signOut();\n    setLeads([]);\n    setFiles([]);\n    setAgents([]);\n    setCalls([]);\n    setNumbers([]);\n    setBillingSummary(null);\n    setBillingEntries([]);\n    setEditingAgentId(null);\n    setStatus(\"Signed out.\");\n  }\n\n  async function addLead() {\n    if (!accessToken) return;\n    if (!leadForm.fullName.trim()) {\n      setStatus(\"Lead name is required.\");\n      return;\n    }\n\n    setStatus(\"Creating lead...\");\n    try {\n      const payload = await crmJsonRequest<{ lead: CrmLead }>(clientSlug, \"/leads\", accessToken, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          fullName: leadForm.fullName.trim(),\n          email: leadForm.email.trim() || undefined,\n          phone: leadForm.phone.trim() || undefined,\n          company: leadForm.company.trim() || undefined,\n          source: leadForm.source.trim() || undefined,\n          notes: leadForm.notes.trim() || undefined,\n        }),\n      });\n      setLeads((prev) => [payload.lead, ...prev]);\n      setLeadForm({ fullName: \"\", email: \"\", phone: \"\", company: \"\", source: \"\", notes: \"\" });\n      setStatus(\"Lead created.\");\n      setActiveTab(\"leads\");\n    } catch (error) {\n      setStatus((error as Error).message);\n    }\n  }\n\n  async function updateLeadStage(leadId: string, stage: CrmLead[\"stage\"]) {\n    if (!accessToken) return;\n    setLeads((prev) => prev.map((lead) => (lead.id === leadId ? { ...lead, stage } : lead)));\n    try {\n      await crmJsonRequest<{ lead: CrmLead }>(clientSlug, `/leads/${encodeURIComponent(leadId)}`, accessToken, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ stage }),\n      });\n      setStatus(null);\n    } catch (error) {\n      setStatus((error as Error).message);\n      await loadBootstrapData(accessToken);\n    }\n  }\n\n  async function uploadAttachment() {\n    if (!accessToken || !uploadFile) return;\n    setStatus(\"Uploading file...\");\n\n    const form = new FormData();\n    form.append(\"file\", uploadFile);\n    if (uploadLeadId) {\n      form.append(\"leadId\", uploadLeadId);\n    }\n\n    try {\n      const payload = await crmJsonRequest<{ file: CrmFile }>(clientSlug, \"/files\", accessToken, {\n        method: \"POST\",\n        body: form,\n      });\n\n      setFiles((prev) => [payload.file, ...prev]);\n      setUploadFile(null);\n      setUploadLeadId(\"\");\n      setStatus(\"File uploaded.\");\n      setActiveTab(\"files\");\n    } catch (error) {\n      setStatus((error as Error).message);\n    }\n  }\n\n  async function requestEmbedAccess() {\n    if (!accessToken) return;\n    setLoading(true);\n    setStatus(\"Requesting embed access...\");\n\n    try {\n      const payload = await crmJsonRequest<ProjectDetailsPayload>(clientSlug, \"\", accessToken, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ embedStatus: \"requested\" }),\n      });\n      const nextEmbedState = normalizeEmbedState(payload.project.embedStatus);\n      if (nextEmbedState) {\n        setEmbedState(nextEmbedState);\n      }\n      setStatus(\"Embed access requested. Pending admin approval.\");\n    } catch (error) {\n      setStatus((error as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function uploadLogo() {\n    if (!accessToken || !logoFile) {\n      setStatus(\"Select a logo image first.\");\n      return;\n    }\n\n    setLogoUploading(true);\n    setStatus(\"Uploading company logo...\");\n\n    try {\n      const form = new FormData();\n      form.append(\"logo\", logoFile);\n      const payload = await crmJsonRequest<{ project: { logoUrl: string | null } }>(\n        clientSlug,\n        \"/branding\",\n        accessToken,\n        {\n          method: \"POST\",\n          body: form,\n        },\n      );\n\n      setProjectInfo((prev) => ({\n        ...prev,\n        logoUrl: payload.project.logoUrl,\n      }));\n      setLogoFile(null);\n      setStatus(\"Logo updated successfully.\");\n    } catch (error) {\n      setStatus((error as Error).message);\n    } finally {\n      setLogoUploading(false);\n    }\n  }\n\n  async function previewSelectedVoice() {\n    const selectedVoiceId = newAgentForm.voiceId.trim();\n    if (!selectedVoiceId) {\n      setStatus(\"Select a voice first.\");\n      return;\n    }\n\n    const selectedVoice = voiceOptions.find((voice) => voice.id === selectedVoiceId);\n    if (!selectedVoice) {\n      setStatus(\"Selected voice is not available.\");\n      return;\n    }\n\n    const audio = voicePreviewAudioRef.current;\n    if (!audio) {\n      setStatus(\"Voice preview player is unavailable.\");\n      return;\n    }\n\n    if (playingVoiceId === selectedVoiceId) {\n      await stopVoicePreview();\n      return;\n    }\n\n    setPreviewingVoice(true);\n    try {\n      await stopVoicePreview();\n\n      if (selectedVoice.previewSampleUrl) {\n        audio.src = selectedVoice.previewSampleUrl;\n        await audio.play();\n        setPlayingVoiceId(selectedVoiceId);\n        setStatus(`Playing voice preview for ${selectedVoice.label}.`);\n        return;\n      }\n\n      const configRes = await fetch(`/api/ev/voice/voices/preview-config?voiceId=${encodeURIComponent(selectedVoiceId)}`);\n      const configPayload = (await configRes.json().catch(() => ({}))) as\n        | VoicePreviewConfigResponse\n        | { error?: string };\n\n      if (!configRes.ok || !(\"preview\" in configPayload)) {\n        const message =\n          typeof (configPayload as { error?: string }).error === \"string\"\n            ? (configPayload as { error?: string }).error\n            : \"Preview is unavailable for this voice.\";\n        throw new Error(message);\n      }\n\n      const mod = await import(\"@vapi-ai/web\");\n      const Vapi = mod.default as unknown as new (publicKey: string) => VapiClient;\n      const client = new Vapi(configPayload.preview.publicKey);\n      voicePreviewClientRef.current = client;\n      setPlayingVoiceId(selectedVoiceId);\n\n      client.on(\"call-end\", () => {\n        if (voicePreviewClientRef.current === client) {\n          voicePreviewClientRef.current = null;\n        }\n        setPlayingVoiceId((prev) => (prev === selectedVoiceId ? null : prev));\n      });\n\n      client.on(\"error\", () => {\n        if (voicePreviewClientRef.current === client) {\n          voicePreviewClientRef.current = null;\n        }\n        setPlayingVoiceId((prev) => (prev === selectedVoiceId ? null : prev));\n        setStatus(\"Live voice preview failed.\");\n      });\n\n      await client.start(configPayload.preview.assistantId, configPayload.preview.assistantOverrides);\n\n      voicePreviewTimeoutRef.current = setTimeout(() => {\n        void stopVoicePreview();\n      }, configPayload.preview.timeoutSeconds * 1000);\n\n      setStatus(`Running live voice preview for ${selectedVoice.label}.`);\n    } catch {\n      setPlayingVoiceId(null);\n      setStatus(\"Failed to play selected voice preview.\");\n    } finally {\n      setPreviewingVoice(false);\n    }\n  }\n\n  async function createAgent() {\n    if (!accessToken) return;\n    if (!newAgentForm.name.trim()) {\n      setStatus(\"Agent name is required.\");\n      return;\n    }\n\n    setCreatingAgent(true);\n    setStatus(\"Creating CRM agent...\");\n\n    try {\n      const selectedPhoneOption = newAgentForm.phoneSelection.trim();\n      const autoGeneratePhoneNumber = selectedPhoneOption === AUTO_SIP_NUMBER_OPTION;\n      const phoneNumberId = selectedPhoneOption && !autoGeneratePhoneNumber ? selectedPhoneOption : undefined;\n      const payload = await crmJsonRequest<{ agent: CrmAgent; number: CrmNumber | null }>(clientSlug, \"/agents\", accessToken, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name: newAgentForm.name.trim(),\n          intro: newAgentForm.intro.trim() || undefined,\n          firstMessageMode: newAgentForm.firstMessageMode,\n          systemPrompt: newAgentForm.systemPrompt.trim() || undefined,\n          voiceId: newAgentForm.voiceId || undefined,\n          phoneNumberId,\n          autoGeneratePhoneNumber: autoGeneratePhoneNumber || undefined,\n          numberDesiredAreaCode:\n            autoGeneratePhoneNumber && newAgentForm.numberDesiredAreaCode.trim()\n              ? newAgentForm.numberDesiredAreaCode.trim()\n              : undefined,\n        }),\n      });\n\n      setAgents((prev) => [payload.agent, ...prev]);\n      const assignedNumber = payload.number;\n      if (assignedNumber) {\n        setNumbers((prev) => [assignedNumber, ...prev.filter((num) => num.id !== assignedNumber.id)]);\n      }\n      setNewAgentForm((prev) => ({\n        name: \"\",\n        intro: \"\",\n        firstMessageMode: prev.firstMessageMode,\n        systemPrompt: \"\",\n        voiceId: prev.voiceId,\n        phoneSelection: \"\",\n        numberDesiredAreaCode: \"\",\n      }));\n      setStatus(payload.number ? \"CRM agent created and phone number connected.\" : \"CRM agent created.\");\n      setActiveTab(\"agents\");\n    } catch (error) {\n      setStatus((error as Error).message);\n    } finally {\n      setCreatingAgent(false);\n    }\n  }\n\n  function startEditingAgent(agent: CrmAgent) {\n    setEditingAgentId(agent.id);\n    setEditingAgentForm({\n      name: agent.name,\n      intro: agent.intro,\n      firstMessageMode: agent.firstMessageMode,\n      systemPrompt: agent.systemPrompt,\n      voiceId: agent.voiceId,\n    });\n    setStatus(`Editing ${agent.name}.`);\n  }\n\n  function cancelEditingAgent() {\n    setEditingAgentId(null);\n    setStatus(\"Canceled CRM agent edit.\");\n  }\n\n  async function updateAgent() {\n    if (!accessToken || !editingAgentId) return;\n    if (!editingAgentForm.name.trim()) {\n      setStatus(\"Agent name is required.\");\n      return;\n    }\n\n    setUpdatingAgent(true);\n    setStatus(\"Updating CRM agent...\");\n\n    try {\n      const payload = await crmJsonRequest<{ agent: CrmAgent }>(\n        clientSlug,\n        `/agents/${encodeURIComponent(editingAgentId)}`,\n        accessToken,\n        {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            name: editingAgentForm.name.trim(),\n            intro: editingAgentForm.intro.trim() || undefined,\n            firstMessageMode: editingAgentForm.firstMessageMode,\n            systemPrompt: editingAgentForm.systemPrompt.trim() || undefined,\n            voiceId: editingAgentForm.voiceId || undefined,\n          }),\n        },\n      );\n\n      setAgents((prev) => prev.map((agent) => (agent.id === payload.agent.id ? payload.agent : agent)));\n      setEditingAgentId(null);\n      setStatus(\"CRM agent updated.\");\n    } catch (error) {\n      setStatus((error as Error).message);\n    } finally {\n      setUpdatingAgent(false);\n    }\n  }\n\n  async function purchaseNumber() {\n    if (!accessToken) return;\n    if (!numberForm.assignAgentId) {\n      setStatus(\"Select an agent for the new phone number.\");\n      return;\n    }\n\n    setBuyingNumber(true);\n    setStatus(\"Purchasing phone number...\");\n\n    try {\n      const payload = await crmJsonRequest<{ number: CrmNumber }>(clientSlug, \"/phone-numbers\", accessToken, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          country: numberForm.country.trim() || \"US\",\n          areaCode: numberForm.areaCode.trim() || undefined,\n          assignAgentId: numberForm.assignAgentId,\n        }),\n      });\n\n      setNumbers((prev) => [payload.number, ...prev]);\n      await loadBillingData(accessToken);\n      setStatus(\"Number purchase submitted.\");\n    } catch (error) {\n      setStatus((error as Error).message);\n    } finally {\n      setBuyingNumber(false);\n    }\n  }\n\n  async function searchCalls(sync = false) {\n    if (!accessToken) return;\n    setLoading(true);\n\n    try {\n      await loadCallsData(accessToken, { sync });\n      setStatus(null);\n    } catch (error) {\n      setStatus((error as Error).message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const tabs: Array<{ id: TabId; label: string }> = useMemo(\n    () => [\n      { id: \"dashboard\", label: \"Overview\" },\n      { id: \"agents\", label: `Agents (${agents.length})` },\n      { id: \"calls\", label: `Calls (${calls.length})` },\n      { id: \"leads\", label: `Leads (${leads.length})` },\n      { id: \"files\", label: `Files (${files.length})` },\n      { id: \"settings\", label: \"Settings\" },\n    ],\n    [agents.length, calls.length, leads.length, files.length],\n  );\n\n  if (!authReady) {\n    return (\n      <div className=\"crmPortalRoot crmPortalCenter\">\n        <p className=\"muted\">Initializing workspace...</p>\n      </div>\n    );\n  }\n\n  if (!isSupabaseEnabled()) {\n    return (\n      <div className=\"crmPortalRoot crmPortalCenter\">\n        <section className=\"card crmPortalNoticeCard\">\n          <p className=\"muted crmTextCenter\">\n            Auth is disabled. Please configure `NEXT_PUBLIC_SUPABASE_URL` to continue.\n          </p>\n        </section>\n      </div>\n    );\n  }\n\n  if (!session) {\n    return (\n      <div className=\"crmPortalRoot crmPortalCenter\">\n        <section className=\"card crmAuthCard crmAuthCardCompact\">\n          <div className=\"crmAuthHeader\">\n            {projectInfo.logoUrl ? (\n              // eslint-disable-next-line @next/next/no-img-element\n              <img src={projectInfo.logoUrl} alt={projectInfo.name} width={120} height={48} className=\"crmAuthLogo\" />\n            ) : null}\n            <h2 className=\"crmAuthTitle\">{projectInfo.name} Workspace</h2>\n            <p className=\"muted crmAuthSubtitle\">Sign in with your client email to access your CRM.</p>\n          </div>\n          <div className=\"crmAuthForm\">\n            <input\n              type=\"email\"\n              placeholder=\"you@client.com\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"crmInputWide\"\n            />\n            <button type=\"button\" className=\"crmButtonFull\" onClick={() => void sendMagicLink()}>\n              Continue with Email Link\n            </button>\n          </div>\n          {status ? <p className=\"muted crmAuthStatus\">{status}</p> : null}\n        </section>\n      </div>\n    );\n  }\n\n  const embedHost = origin || \"{YOUR_CRM_HOST}\";\n  const embedCodeSnippet = `<iframe src=\"${embedHost}/portal/${clientSlug}\" width=\"100%\" height=\"800px\" style=\"border:none; border-radius:12px; box-shadow:0 4px 24px rgba(0,0,0,0.1);\"></iframe>`;\n  const dashboardSubtitle = projectInfo.description?.trim() || TAB_SUBTITLES.dashboard;\n\n  return (\n    <div className=\"crmDashboardLayout\">\n      <audio ref={voicePreviewAudioRef} hidden onEnded={() => setPlayingVoiceId(null)} />\n\n      <aside className=\"crmSidebar\">\n        <div className=\"crmSidebarBrand\">\n          {projectInfo.logoUrl ? (\n            // eslint-disable-next-line @next/next/no-img-element\n            <img src={projectInfo.logoUrl} alt={projectInfo.name} className=\"crmSidebarLogo\" />\n          ) : null}\n          <h2 className=\"crmSidebarName\">{projectInfo.name}</h2>\n          <div className=\"muted crmSidebarSlug\">/{clientSlug}</div>\n          {projectInfo.description ? <p className=\"muted crmSidebarDescription\">{projectInfo.description}</p> : null}\n        </div>\n\n        <nav className=\"crmSidebarNav\">\n          {tabs.map((tab) => (\n            <button\n              type=\"button\"\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`crmSidebarTab${activeTab === tab.id ? \" isActive\" : \"\"}`}\n            >\n              {tab.label}\n            </button>\n          ))}\n        </nav>\n\n        <div className=\"crmSidebarFooter\">\n          <div className=\"crmSidebarEmail\">{session.user.email ?? \"Unknown email\"}</div>\n          <button type=\"button\" className=\"secondary crmButtonFull crmButtonSmall\" onClick={() => void signOut()}>\n            Sign Out\n          </button>\n        </div>\n      </aside>\n\n      <main className=\"crmMain\">\n        <div className=\"crmTopBar\">\n          <div>\n            <h1 className=\"crmTopTitle\">{activeTab === \"dashboard\" ? \"Overview\" : activeTab}</h1>\n            <p className=\"muted crmTopSubtitle\">\n              {activeTab === \"dashboard\" ? dashboardSubtitle : TAB_SUBTITLES[activeTab]}\n            </p>\n          </div>\n          <div className=\"inlineActions inlineActionsCenter\">\n            {status ? <span className=\"crmTopStatus\">{status}</span> : null}\n            <button\n              type=\"button\"\n              className=\"secondary crmButtonSmall\"\n              onClick={() => void refreshPortalData()}\n              disabled={loading}\n            >\n              {loading ? \"Refreshing...\" : \"Refresh Data\"}\n            </button>\n          </div>\n        </div>\n\n        {activeTab === \"dashboard\" && (\n          <div className=\"crmStackLg\">\n            <div className=\"crmMetricGrid\">\n              <div className=\"card crmMetricCardWide\">\n                <div className=\"muted crmMetricLabel\">Total Leads</div>\n                <div className=\"crmMetricValueStrong\">{leads.length}</div>\n              </div>\n              <div className=\"card crmMetricCardWide\">\n                <div className=\"muted crmMetricLabel\">Client Agents</div>\n                <div className=\"crmMetricValueStrong\">{agents.length}</div>\n              </div>\n              <div className=\"card crmMetricCardWide\">\n                <div className=\"muted crmMetricLabel\">Recent Calls</div>\n                <div className=\"crmMetricValueStrong\">{calls.length}</div>\n              </div>\n              <div className=\"card crmMetricCardWide\">\n                <div className=\"muted crmMetricLabel\">Active Numbers</div>\n                <div className=\"crmMetricValueStrong\">{numbers.length}</div>\n              </div>\n            </div>\n\n            <div className=\"card crmCardPadded\">\n              <h3 className=\"crmCardHeading\">Recent Calls (Client-Only)</h3>\n              <div className=\"tableWrap crmTableWrapFlush\">\n                <table className=\"crmTableWide\">\n                  <thead className=\"crmTableHeadSmall\">\n                    <tr>\n                      <th>Call</th>\n                      <th>Agent</th>\n                      <th>Status</th>\n                      <th>From</th>\n                      <th>To</th>\n                      <th>Started</th>\n                      <th>Recording</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {calls.slice(0, 8).map((call) => (\n                      <tr key={call.id} className=\"crmRowCompact\">\n                        <td>{call.vapiCallId}</td>\n                        <td>{call.agent?.name ?? \"-\"}</td>\n                        <td>{call.status}</td>\n                        <td>{call.fromNumber ?? \"-\"}</td>\n                        <td>{call.toNumber ?? \"-\"}</td>\n                        <td>{formatDate(call.startedAt)}</td>\n                        <td>\n                          {call.recordingUrl ? (\n                            <audio controls preload=\"none\" src={call.recordingUrl} className=\"crmAudioPlayer\" />\n                          ) : (\n                            <span className=\"muted\">No recording</span>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                    {calls.length === 0 && (\n                      <tr>\n                        <td colSpan={7} className=\"muted crmTableEmpty\">\n                          No client calls logged yet.\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n\n            <div className=\"card crmCardPadded\">\n              <h3 className=\"crmCardHeading\">Quick Add Lead</h3>\n              <div className=\"fieldGrid crmQuickLeadGrid\">\n                <input\n                  placeholder=\"Full Name\"\n                  value={leadForm.fullName}\n                  onChange={(e) => setLeadForm((prev) => ({ ...prev, fullName: e.target.value }))}\n                />\n                <input\n                  placeholder=\"Email\"\n                  type=\"email\"\n                  value={leadForm.email}\n                  onChange={(e) => setLeadForm((prev) => ({ ...prev, email: e.target.value }))}\n                />\n              </div>\n              <div className=\"crmActionsEnd\">\n                <button type=\"button\" onClick={() => void addLead()}>\n                  Save Lead\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === \"agents\" && (\n          <div className=\"crmStack\">\n            <div className=\"card crmCardPadded\">\n              <h3 className=\"crmCardHeading\">Create CRM Agent</h3>\n              <div className=\"fieldGrid crmAgentGrid\">\n                <label>\n                  Name\n                  <input\n                    value={newAgentForm.name}\n                    onChange={(e) => setNewAgentForm((prev) => ({ ...prev, name: e.target.value }))}\n                    placeholder=\"Client Assistant\"\n                  />\n                </label>\n                <label>\n                  Voice\n                  <div className=\"crmVoiceSelectGroup\">\n                    <select\n                      aria-label=\"Agent Voice\"\n                      value={newAgentForm.voiceId}\n                      onChange={(e) => setNewAgentForm((prev) => ({ ...prev, voiceId: e.target.value }))}\n                      className=\"crmInputGrow\"\n                    >\n                      {!voiceOptions.length && <option value=\"\">No approved voices</option>}\n                      {voiceOptions.map((voice) => (\n                        <option key={voice.id} value={voice.id}>\n                          {voice.label} ({voice.locale})\n                        </option>\n                      ))}\n                    </select>\n                    <button\n                      type=\"button\"\n                      className=\"secondary\"\n                      onClick={() => void previewSelectedVoice()}\n                      disabled={previewingVoice || !newAgentForm.voiceId}\n                      aria-label=\"Preview selected voice\"\n                      title=\"Preview selected voice\"\n                    >\n                      {playingVoiceId === newAgentForm.voiceId ? \"■\" : \"▶\"}\n                    </button>\n                  </div>\n                  <p className=\"muted crmInputHint\">\n                    If no voice is selected, a default approved voice is auto-assigned.\n                  </p>\n                </label>\n                <label>\n                  Phone Number\n                  <select\n                    aria-label=\"Assign Phone Number\"\n                    value={newAgentForm.phoneSelection}\n                    onChange={(e) => setNewAgentForm((prev) => ({ ...prev, phoneSelection: e.target.value }))}\n                  >\n                    <option value=\"\">No number selected</option>\n                    <option value={AUTO_SIP_NUMBER_OPTION}>Auto-generate free VAPI SIP number</option>\n                    {numbers.map((number) => (\n                      <option key={number.id} value={number.id}>\n                        {number.displayNumber}\n                        {number.assignedAgent ? ` (assigned: ${number.assignedAgent.name})` : \"\"}\n                      </option>\n                    ))}\n                  </select>\n                </label>\n                {newAgentForm.phoneSelection === AUTO_SIP_NUMBER_OPTION ? (\n                  <label>\n                    Preferred Area Code (optional)\n                    <input\n                      value={newAgentForm.numberDesiredAreaCode}\n                      onChange={(e) =>\n                        setNewAgentForm((prev) => ({\n                          ...prev,\n                          numberDesiredAreaCode: e.target.value.replace(/\\D/g, \"\").slice(0, 3),\n                        }))}\n                      placeholder=\"212\"\n                      inputMode=\"numeric\"\n                      maxLength={3}\n                    />\n                  </label>\n                ) : null}\n                <label className=\"crmFieldFull\">\n                  Intro (optional)\n                  <input\n                    value={newAgentForm.intro}\n                    onChange={(e) => setNewAgentForm((prev) => ({ ...prev, intro: e.target.value }))}\n                    placeholder=\"Hi, this is your assistant. How can I help?\"\n                  />\n                </label>\n                <label>\n                  Conversation Start\n                  <select\n                    aria-label=\"Conversation Start Mode\"\n                    value={newAgentForm.firstMessageMode}\n                    onChange={(e) =>\n                      setNewAgentForm((prev) => ({\n                        ...prev,\n                        firstMessageMode: e.target.value as \"assistant-speaks-first\" | \"assistant-waits-for-user\",\n                      }))}\n                  >\n                    <option value=\"assistant-speaks-first\">Agent speaks first</option>\n                    <option value=\"assistant-waits-for-user\">User speaks first</option>\n                  </select>\n                </label>\n                <label className=\"crmFieldFull\">\n                  System Prompt (optional)\n                  <textarea\n                    rows={5}\n                    value={newAgentForm.systemPrompt}\n                    onChange={(e) => setNewAgentForm((prev) => ({ ...prev, systemPrompt: e.target.value }))}\n                    placeholder=\"Instructions for this client's voice agent...\"\n                  />\n                </label>\n              </div>\n              <div className=\"inlineActions crmTopGap\">\n                <button type=\"button\" onClick={() => void createAgent()} disabled={creatingAgent}>\n                  {creatingAgent ? \"Creating...\" : \"Create Agent\"}\n                </button>\n                <button type=\"button\" className=\"secondary\" onClick={() => void refreshPortalData()} disabled={loading}>\n                  Refresh\n                </button>\n              </div>\n            </div>\n\n            {editingAgentId ? (\n              <div className=\"card crmCardPadded\">\n                <h3 className=\"crmCardHeading\">Edit CRM Agent</h3>\n                <div className=\"fieldGrid crmAgentGrid\">\n                  <label>\n                    Name\n                    <input\n                      value={editingAgentForm.name}\n                      onChange={(e) => setEditingAgentForm((prev) => ({ ...prev, name: e.target.value }))}\n                      placeholder=\"Client Assistant\"\n                    />\n                  </label>\n                  <label>\n                    Voice\n                    <select\n                      aria-label=\"Agent Voice\"\n                      value={editingAgentForm.voiceId}\n                      onChange={(e) => setEditingAgentForm((prev) => ({ ...prev, voiceId: e.target.value }))}\n                    >\n                      {!voiceOptions.length && <option value=\"\">Default voice</option>}\n                      {voiceOptions.map((voice) => (\n                        <option key={voice.id} value={voice.id}>\n                          {voice.label} ({voice.locale})\n                        </option>\n                      ))}\n                    </select>\n                  </label>\n                  <label className=\"crmFieldFull\">\n                    Intro\n                    <input\n                      value={editingAgentForm.intro}\n                      onChange={(e) => setEditingAgentForm((prev) => ({ ...prev, intro: e.target.value }))}\n                      placeholder=\"Hi, this is your assistant. How can I help?\"\n                    />\n                  </label>\n                  <label>\n                    Conversation Start\n                    <select\n                      aria-label=\"Conversation Start Mode\"\n                      value={editingAgentForm.firstMessageMode}\n                      onChange={(e) =>\n                        setEditingAgentForm((prev) => ({\n                          ...prev,\n                          firstMessageMode: e.target.value as \"assistant-speaks-first\" | \"assistant-waits-for-user\",\n                        }))}\n                    >\n                      <option value=\"assistant-speaks-first\">Agent speaks first</option>\n                      <option value=\"assistant-waits-for-user\">User speaks first</option>\n                    </select>\n                  </label>\n                  <label className=\"crmFieldFull\">\n                    System Prompt\n                    <textarea\n                      rows={5}\n                      value={editingAgentForm.systemPrompt}\n                      onChange={(e) => setEditingAgentForm((prev) => ({ ...prev, systemPrompt: e.target.value }))}\n                      placeholder=\"Instructions for this client's voice agent...\"\n                    />\n                  </label>\n                </div>\n                <div className=\"inlineActions crmTopGap\">\n                  <button type=\"button\" onClick={() => void updateAgent()} disabled={updatingAgent}>\n                    {updatingAgent ? \"Updating...\" : \"Update Agent\"}\n                  </button>\n                  <button type=\"button\" className=\"secondary\" onClick={cancelEditingAgent} disabled={updatingAgent}>\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            ) : null}\n\n            <div className=\"card crmCardPadded\">\n              <h3 className=\"crmCardHeading\">CRM Agents</h3>\n              <div className=\"tableWrap crmTableWrapFlush\">\n                <table className=\"crmTableWide\">\n                  <thead className=\"crmTableHeadSmall\">\n                    <tr>\n                      <th>Name</th>\n                      <th>Voice</th>\n                      <th>Status</th>\n                      <th>Conversation Start</th>\n                      <th>Phone Number</th>\n                      <th>Description</th>\n                      <th>Updated</th>\n                      <th>Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {agents.map((agent) => (\n                      <tr key={agent.id} className=\"crmRowCompact\">\n                        <td className=\"crmLeadName\">{agent.name}</td>\n                        <td>{agent.voiceLabel}</td>\n                        <td>{agent.status}</td>\n                        <td>{agent.firstMessageMode === \"assistant-waits-for-user\" ? \"User first\" : \"Agent first\"}</td>\n                        <td>{numberByAgentId.get(agent.id) ?? \"-\"}</td>\n                        <td className=\"muted\">{agent.description}</td>\n                        <td>{formatDate(agent.updatedAt)}</td>\n                        <td>\n                          <button\n                            type=\"button\"\n                            className=\"secondary crmButtonSmall\"\n                            onClick={() => startEditingAgent(agent)}\n                            disabled={updatingAgent}\n                          >\n                            {editingAgentId === agent.id ? \"Editing\" : \"Edit\"}\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                    {!agents.length && (\n                      <tr>\n                        <td colSpan={8} className=\"muted crmTableEmpty\">\n                          No CRM agents yet.\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === \"calls\" && (\n          <div className=\"crmStack\">\n            <section className=\"card crmCardPadded\">\n              <div className=\"inlineActions\">\n                <input\n                  aria-label=\"Search Calls\"\n                  value={callQuery}\n                  onChange={(e) => setCallQuery(e.target.value)}\n                  placeholder=\"Search number or call id\"\n                  className=\"crmInputSearch\"\n                />\n                <button type=\"button\" className=\"secondary\" onClick={() => void searchCalls(false)} disabled={loading}>\n                  Search\n                </button>\n                <button type=\"button\" onClick={() => void searchCalls(true)} disabled={loading}>\n                  Sync + Refresh\n                </button>\n              </div>\n            </section>\n\n            <section className=\"card crmCardPadded\">\n              <div className=\"tableWrap crmTableWrapFlush\">\n                <table className=\"crmTableWide\">\n                  <thead className=\"crmTableHeadSmall\">\n                    <tr>\n                      <th>Call</th>\n                      <th>Agent</th>\n                      <th>Status</th>\n                      <th>From</th>\n                      <th>To</th>\n                      <th>Duration</th>\n                      <th>Cost</th>\n                      <th>Started</th>\n                      <th>Recording</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {calls.map((call) => (\n                      <tr key={call.id} className=\"crmRowCompact\">\n                        <td>{call.vapiCallId}</td>\n                        <td>{call.agent?.name ?? \"-\"}</td>\n                        <td>{call.status}</td>\n                        <td>{call.fromNumber ?? \"-\"}</td>\n                        <td>{call.toNumber ?? \"-\"}</td>\n                        <td>{call.durationSeconds ?? \"-\"}</td>\n                        <td>{typeof call.costUsd === \"number\" ? `$${call.costUsd.toFixed(3)}` : \"-\"}</td>\n                        <td>{formatDate(call.startedAt)}</td>\n                        <td>\n                          {call.recordingUrl ? (\n                            <audio controls preload=\"none\" src={call.recordingUrl} className=\"crmAudioPlayer\" />\n                          ) : (\n                            <span className=\"muted\">No recording</span>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                    {!calls.length && (\n                      <tr>\n                        <td colSpan={9} className=\"muted crmTableEmpty\">\n                          No client calls logged yet.\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </section>\n          </div>\n        )}\n\n        {activeTab === \"leads\" && (\n          <div className=\"crmStack\">\n            <div className=\"card crmCardPadded\">\n              <div className=\"tableWrap crmTableWrapFlush\">\n                <table className=\"crmTableWide\">\n                  <thead className=\"crmTableHeadSmall\">\n                    <tr>\n                      <th>Name</th>\n                      <th>Email</th>\n                      <th>Phone</th>\n                      <th>Company</th>\n                      <th>Stage</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {leads.map((lead) => (\n                      <tr key={lead.id} className=\"crmRowCompact\">\n                        <td className=\"crmLeadName\">{lead.fullName}</td>\n                        <td className=\"muted\">{lead.email ?? \"-\"}</td>\n                        <td className=\"muted\">{lead.phone ?? \"-\"}</td>\n                        <td className=\"muted\">{lead.company ?? \"-\"}</td>\n                        <td>\n                          <select\n                            aria-label=\"Lead Stage\"\n                            value={lead.stage}\n                            onChange={(e) => void updateLeadStage(lead.id, e.target.value as CrmLead[\"stage\"])}\n                            className=\"crmStageSelect\"\n                          >\n                            {STAGE_OPTIONS.map((stage) => (\n                              <option key={stage} value={stage}>\n                                {stage}\n                              </option>\n                            ))}\n                          </select>\n                        </td>\n                      </tr>\n                    ))}\n                    {!leads.length && (\n                      <tr>\n                        <td colSpan={5} className=\"muted crmTableEmpty\">\n                          No leads exist yet.\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === \"files\" && (\n          <div className=\"crmStack\">\n            <div className=\"card crmCardPadded crmFileUploadCard\">\n              <select aria-label=\"Select lead\" value={uploadLeadId} onChange={(e) => setUploadLeadId(e.target.value)}>\n                <option value=\"\">General (no lead)</option>\n                {leads.map((lead) => (\n                  <option key={lead.id} value={lead.id}>\n                    {lead.fullName}\n                  </option>\n                ))}\n              </select>\n              <input\n                aria-label=\"Upload File\"\n                type=\"file\"\n                onChange={(e) => setUploadFile(e.target.files?.[0] ?? null)}\n                className=\"crmUploadInput crmFileInputGrow\"\n              />\n              <button type=\"button\" onClick={() => void uploadAttachment()} disabled={!uploadFile}>\n                Upload File\n              </button>\n            </div>\n\n            <div className=\"card crmCardPadded\">\n              <div className=\"tableWrap crmTableWrapFlush\">\n                <table className=\"crmTableWide\">\n                  <thead className=\"crmTableHeadSmall\">\n                    <tr>\n                      <th>File Name</th>\n                      <th>Associated Lead</th>\n                      <th>Uploaded By</th>\n                      <th>Size</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {files.map((file) => (\n                      <tr key={file.id} className=\"crmRowCompact\">\n                        <td>\n                          {file.publicUrl ? (\n                            <a href={file.publicUrl} target=\"_blank\" rel=\"noreferrer\" className=\"crmFileLink\">\n                              {file.fileName}\n                            </a>\n                          ) : (\n                            file.fileName\n                          )}\n                        </td>\n                        <td className=\"muted\">{file.leadId ? leadsById.get(file.leadId)?.fullName ?? file.leadId : \"General\"}</td>\n                        <td className=\"muted\">{file.uploadedByEmail ?? \"-\"}</td>\n                        <td className=\"muted\">{Math.round(file.sizeBytes / 1024)} KB</td>\n                      </tr>\n                    ))}\n                    {!files.length && (\n                      <tr>\n                        <td colSpan={4} className=\"muted crmTableEmpty\">\n                          No files uploaded yet.\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === \"settings\" && (\n          <div className=\"crmSettingsStack\">\n            <div className=\"card crmSettingsCard\">\n              <h3 className=\"crmSettingsTitle\">Company Branding</h3>\n              <p className=\"muted crmSettingsHelp\">Upload your company logo. It will appear beside your CRM title.</p>\n              <div className=\"crmSettingsDivider crmLogoUpload\">\n                {projectInfo.logoUrl ? (\n                  // eslint-disable-next-line @next/next/no-img-element\n                  <img\n                    src={projectInfo.logoUrl}\n                    alt=\"Company logo\"\n                    width={72}\n                    height={72}\n                    className=\"crmCompanyLogoLarge\"\n                  />\n                ) : (\n                  <div className=\"crmCompanyLogoPlaceholder\">\n                    No Logo\n                  </div>\n                )}\n                <div className=\"crmLogoActions\">\n                  <input aria-label=\"Upload Logo\" type=\"file\" accept=\"image/*\" onChange={(e) => setLogoFile(e.target.files?.[0] ?? null)} />\n                  <div className=\"inlineActions\">\n                    <button type=\"button\" onClick={() => void uploadLogo()} disabled={logoUploading || !logoFile}>\n                      {logoUploading ? \"Uploading...\" : \"Upload Logo\"}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card crmSettingsCard\">\n              <h3 className=\"crmSettingsTitle\">Billing</h3>\n              <p className=\"muted crmSettingsHelp\">CRM-specific billing summary for this client project.</p>\n              <div className=\"crmSettingsDivider\">\n                <div className=\"crmBillingGrid\">\n                  <div className=\"card crmBillingCard\">\n                    <div className=\"muted crmBillingLabel\">Balance</div>\n                    <div className=\"crmBillingValue\">{formatMoney(billingSummary?.balanceCents ?? 0)}</div>\n                  </div>\n                  <div className=\"card crmBillingCard\">\n                    <div className=\"muted crmBillingLabel\">Monthly Phone Cost</div>\n                    <div className=\"crmBillingValue\">{formatMoney(billingSummary?.monthlyPhoneCostCents ?? 0)}</div>\n                  </div>\n                  <div className=\"card crmBillingCard\">\n                    <div className=\"muted crmBillingLabel\">Entries</div>\n                    <div className=\"crmBillingValue\">{billingSummary?.entryCount ?? 0}</div>\n                  </div>\n                </div>\n\n                <div className=\"tableWrap crmTableWrapFlush\">\n                  <table className=\"crmTableWide\">\n                    <thead className=\"crmTableHeadSmall\">\n                      <tr>\n                        <th>Description</th>\n                        <th>Type</th>\n                        <th>Amount</th>\n                        <th>Date</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {billingEntries.map((entry) => (\n                        <tr key={entry.id} className=\"crmRowCompact\">\n                          <td>{entry.description}</td>\n                          <td>{entry.entryType}</td>\n                          <td>{formatMoney(entry.amountCents)}</td>\n                          <td>{formatDate(entry.createdAt)}</td>\n                        </tr>\n                      ))}\n                      {!billingEntries.length && (\n                        <tr>\n                          <td colSpan={4} className=\"muted crmTableEmpty\">\n                            No billing entries for this CRM yet.\n                          </td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card crmSettingsCard\">\n              <h3 className=\"crmSettingsTitle\">Phone Numbers</h3>\n              <p className=\"muted crmSettingsHelp\">Purchase numbers and assign them to your CRM agents.</p>\n              <div className=\"crmSettingsDivider\">\n                <div className=\"fieldGrid crmPhoneGrid\">\n                  <label>\n                    Country\n                    <input\n                      value={numberForm.country}\n                      onChange={(e) => setNumberForm((prev) => ({ ...prev, country: e.target.value }))}\n                      placeholder=\"US\"\n                    />\n                  </label>\n                  <label>\n                    Area Code (optional)\n                    <input\n                      value={numberForm.areaCode}\n                      onChange={(e) => setNumberForm((prev) => ({ ...prev, areaCode: e.target.value }))}\n                      placeholder=\"212\"\n                    />\n                  </label>\n                  <label>\n                    Assign Agent\n                    <select\n                      aria-label=\"Assign Agent\"\n                      value={numberForm.assignAgentId}\n                      onChange={(e) => setNumberForm((prev) => ({ ...prev, assignAgentId: e.target.value }))}\n                    >\n                      {!agents.length && <option value=\"\">No CRM agents</option>}\n                      {agents.map((agent) => (\n                        <option key={agent.id} value={agent.id}>\n                          {agent.name}\n                        </option>\n                      ))}\n                    </select>\n                  </label>\n                </div>\n                <div className=\"inlineActions crmTopGapSmall\">\n                  <button type=\"button\" onClick={() => void purchaseNumber()} disabled={buyingNumber || !agents.length}>\n                    {buyingNumber ? \"Purchasing...\" : \"Purchase Number\"}\n                  </button>\n                </div>\n\n                <div className=\"tableWrap crmTableWrapFlush crmTopGap\">\n                  <table className=\"crmTableWide\">\n                    <thead className=\"crmTableHeadSmall\">\n                      <tr>\n                        <th>Number</th>\n                        <th>Status</th>\n                        <th>Assigned Agent</th>\n                        <th>Price</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {numbers.map((num) => (\n                        <tr key={num.id} className=\"crmRowCompact\">\n                          <td>{num.displayNumber}</td>\n                          <td>{num.status}</td>\n                          <td>{num.assignedAgent?.name ?? \"-\"}</td>\n                          <td>{formatMoney(num.monthlyPriceCents)}</td>\n                        </tr>\n                      ))}\n                      {!numbers.length && (\n                        <tr>\n                          <td colSpan={4} className=\"muted crmTableEmpty\">\n                            No CRM numbers yet.\n                          </td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card crmSettingsCard\">\n              <div className=\"crmSettingsHeader\">\n                <div>\n                  <h3 className=\"crmSettingsTitle\">Dashboard Embed</h3>\n                  <p className=\"muted crmSettingsHelp\">\n                    Request permission from the admin to embed this CRM directly into your own internal tools or intranet via an iframe.\n                  </p>\n                </div>\n                <div\n                  className={`crmEmbedStatusPill${embedState === \"approved\" ? \" isApproved\" : \"\"}${embedState === \"requested\" ? \" isRequested\" : \"\"}`}\n                >\n                  Status: <span className=\"crmEmbedStatusValue\">{embedState ? embedState.toUpperCase() : \"DISABLED\"}</span>\n                </div>\n              </div>\n\n              <div className=\"crmSettingsDivider\">\n                {(!embedState || embedState === \"disabled\") && (\n                  <button type=\"button\" onClick={() => void requestEmbedAccess()} disabled={loading}>\n                    Request Embed Access\n                  </button>\n                )}\n\n                {embedState === \"requested\" && (\n                  <div className=\"crmEmbedPending\">\n                    <p className=\"crmEmbedPendingTitle\">Your request is currently pending admin review.</p>\n                    <p className=\"crmEmbedPendingCopy\">You will see the embed code snippet here once approved.</p>\n                  </div>\n                )}\n\n                {embedState === \"approved\" && (\n                  <div>\n                    <h4 className=\"crmSnippetTitle\">Your Integration Snippet</h4>\n                    <div className=\"crmSnippetWrap\">\n                      <pre className=\"crmSnippetCode\">\n                        <code>{embedCodeSnippet}</code>\n                      </pre>\n                      <button\n                        type=\"button\"\n                        className=\"secondary crmSnippetCopyButton\"\n                        onClick={() => {\n                          void navigator.clipboard.writeText(embedCodeSnippet);\n                          setStatus(\"Snippet copied to clipboard!\");\n                        }}\n                      >\n                        Copy Code\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}