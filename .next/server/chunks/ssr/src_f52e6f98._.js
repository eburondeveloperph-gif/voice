module.exports=[75110,a=>{"use strict";async function b(a,b){let c=await fetch(a,{...b,headers:{"Content-Type":"application/json",...b?.headers??{}}}),d=await c.text(),e=d?function(a){try{return JSON.parse(a)}catch{return a}}(d):null;if(!c.ok){let a="object"==typeof e&&e&&"error"in e?String(e.error):`Request failed (${c.status})`,b=function(a){if("string"==typeof a&&a.trim().length>0)return a.trim();if(Array.isArray(a)){let b=a.find(a=>"string"==typeof a&&a.trim().length>0);if(b)return b.trim()}if("object"!=typeof a||null===a)return null;let b=a.message;if("string"==typeof b&&b.trim().length>0)return b.trim();if(Array.isArray(b)){let a=b.find(a=>"string"==typeof a&&a.trim().length>0);if(a)return a.trim()}return null}("object"==typeof e&&e&&"details"in e?e.details:void 0);throw Error(b?`${a}: ${b}`:a)}return e}a.s(["apiRequest",()=>b])},21169,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(75110);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{!async function(){try{let[a,b]=await Promise.all([(0,d.apiRequest)("/api/ev/voice/agents"),(0,d.apiRequest)("/api/ev/voice/phone-numbers")]);e(a.agents),g(b.numbers),a.agents.length>0&&m(a.agents[0].id),b.numbers.length>0&&o(b.numbers[0].id)}catch{s("Error loading configuration data.")}finally{i(!1)}}()},[]);let t=async()=>{if(!j||!l||!n)return void s("Please fill in all fields.");q(!0),s("Initiating outbound call...");try{let a=await (0,d.apiRequest)("/api/ev/voice/calls/outbound",{method:"POST",body:JSON.stringify({assistantId:l,phoneNumberId:n,customerNumber:j})});a.success&&(s(`Call successfully initiated! ID: ${a.callId}`),k(""))}catch(b){let a=b instanceof Error?b.message:"Unknown error";s(`Call failed: ${a}`)}finally{q(!1)}};return h?(0,b.jsx)("div",{className:"dialerPage",children:(0,b.jsx)("p",{className:"muted",children:"Loading dialer..."})}):(0,b.jsxs)("div",{className:"dialerPage",children:[(0,b.jsx)("header",{className:"pageHead",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"pageTitle",children:"Outbound Dialer"}),(0,b.jsx)("p",{className:"pageSubtitle",children:"Manually initiate phone calls with your voice agents."})]})}),(0,b.jsx)("div",{className:"dialerCard card",children:(0,b.jsxs)("div",{className:"fieldGrid",children:[(0,b.jsxs)("label",{children:["Destination Number",(0,b.jsx)("input",{type:"tel",placeholder:"+14150000000",value:j,onChange:a=>k(a.target.value),disabled:p})]}),(0,b.jsxs)("label",{children:["Select Agent",(0,b.jsx)("select",{value:l,onChange:a=>m(a.target.value),disabled:p,children:a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))})]}),(0,b.jsxs)("label",{children:["From Number",(0,b.jsx)("select",{value:n,onChange:a=>o(a.target.value),disabled:p,children:f.map(a=>(0,b.jsx)("option",{value:a.id,children:a.displayNumber},a.id))})]}),(0,b.jsx)("button",{type:"button",className:"playBtn dialerBtn",onClick:t,disabled:p||0===f.length,children:p?"âŒ› Dialing...":"ðŸ“ž Start Call Now"}),r&&(0,b.jsx)("div",{className:`statusBanner ${r.includes("failed")||r.includes("Error")?"error":"success"}`,children:r})]})}),0===f.length&&(0,b.jsx)("div",{className:"warningBox",children:(0,b.jsx)("p",{children:"âš ï¸ No phone numbers available. Please purchase a number in the Numbers tab first."})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=src_f52e6f98._.js.map