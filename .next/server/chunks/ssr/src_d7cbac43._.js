module.exports=[75110,a=>{"use strict";async function b(a,b){let c=await fetch(a,{...b,headers:{"Content-Type":"application/json",...b?.headers??{}}}),d=await c.text(),e=d?function(a){try{return JSON.parse(a)}catch{return a}}(d):null;if(!c.ok){let a="object"==typeof e&&e&&"error"in e?String(e.error):`Request failed (${c.status})`,b=function(a){if("string"==typeof a&&a.trim().length>0)return a.trim();if(Array.isArray(a)){let b=a.find(a=>"string"==typeof a&&a.trim().length>0);if(b)return b.trim()}if("object"!=typeof a||null===a)return null;let b=a.message;if("string"==typeof b&&b.trim().length>0)return b.trim();if(Array.isArray(b)){let a=b.find(a=>"string"==typeof a&&a.trim().length>0);if(a)return a.trim()}return null}("object"==typeof e&&e&&"details"in e?e.details:void 0);throw Error(b?`${a}: ${b}`:a)}return e}a.s(["apiRequest",()=>b])},44847,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(75110);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null);(0,c.useEffect)(()=>{!async function(){let[a,b]=await Promise.all([(0,d.apiRequest)("/api/ev/voice/agents"),(0,d.apiRequest)("/api/ev/voice/phone-numbers")]);e(a.agents),g(b.numbers),a.agents.length>0&&k(a.agents[0].id),b.numbers.length>0&&m(b.numbers[0].id)}()},[]);let r=async()=>{if(0===h.length)return void q("No jobs to process.");o(!0),q("Starting bulk campaign...");try{let a=await (0,d.apiRequest)("/api/ev/voice/calls/bulk",{method:"POST",body:JSON.stringify({phoneNumberId:l,defaultAssistantId:j,jobs:h})});a.success&&(q(`Bulk campaign completed! Processed ${a.results.length} calls.`),i([]))}catch{q("Campaign error: Unknown error")}finally{o(!1)}};return(0,b.jsxs)("div",{className:"bulkPage",children:[(0,b.jsx)("header",{className:"pageHead",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"pageTitle",children:"Bulk Calls"}),(0,b.jsx)("p",{className:"pageSubtitle",children:"Upload spreadsheets to initiate mass outbound voice campaigns."})]})}),(0,b.jsx)("div",{className:"card bulkCard",children:(0,b.jsxs)("div",{className:"fieldGrid",children:[(0,b.jsxs)("label",{children:["1. Select Default Agent",(0,b.jsx)("select",{value:j,onChange:a=>k(a.target.value),children:a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))})]}),(0,b.jsxs)("label",{children:["2. Select Outbound Line",(0,b.jsx)("select",{value:l,onChange:a=>m(a.target.value),children:f.map(a=>(0,b.jsx)("option",{value:a.id,children:a.displayNumber},a.id))})]}),(0,b.jsxs)("label",{className:"uploadZone",children:["3. Upload CSV File",(0,b.jsx)("input",{type:"file",accept:".csv",onChange:a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=a=>{let b=(a.target?.result).split("\n").filter(a=>a.trim()).slice(1).map(a=>{let[b,c,d]=a.split(",").map(a=>a.trim());return{number:b,name:c,assistantId:d}}).filter(a=>a.number);i(b),q(`Detected ${b.length} calls to make.`)},c.readAsText(b)},disabled:n}),(0,b.jsxs)("div",{className:"uploadHint",children:["Header format: ",(0,b.jsx)("code",{children:"number, name, assistantId"})]})]}),h.length>0&&(0,b.jsxs)("div",{className:"previewTable tableWrap",children:[(0,b.jsxs)("table",{children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Number"}),(0,b.jsx)("th",{children:"Name"}),(0,b.jsx)("th",{children:"Assistant Override"})]})}),(0,b.jsx)("tbody",{children:h.slice(0,5).map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:a.number}),(0,b.jsx)("td",{children:a.name||"-"}),(0,b.jsx)("td",{children:a.assistantId||"Default"})]},c))})]}),h.length>5&&(0,b.jsxs)("p",{className:"muted",children:["... and ",h.length-5," more"]})]}),(0,b.jsx)("button",{type:"button",className:"playBtn bulkBtn",onClick:r,disabled:n||0===h.length,children:n?"âŒ› Processing Bulk Jobs...":`ðŸš€ Start ${h.length} Calls`}),p&&(0,b.jsx)("div",{className:"statusBanner success",children:p})]})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=src_d7cbac43._.js.map