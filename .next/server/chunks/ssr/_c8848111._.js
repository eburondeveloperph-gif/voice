module.exports=[75110,a=>{"use strict";async function b(a,b){let c=await fetch(a,{...b,headers:{"Content-Type":"application/json",...b?.headers??{}}}),d=await c.text(),e=d?function(a){try{return JSON.parse(a)}catch{return a}}(d):null;if(!c.ok){let a="object"==typeof e&&e&&"error"in e?String(e.error):`Request failed (${c.status})`,b=function(a){if("string"==typeof a&&a.trim().length>0)return a.trim();if(Array.isArray(a)){let b=a.find(a=>"string"==typeof a&&a.trim().length>0);if(b)return b.trim()}if("object"!=typeof a||null===a)return null;let b=a.message;if("string"==typeof b&&b.trim().length>0)return b.trim();if(Array.isArray(b)){let a=b.find(a=>"string"==typeof a&&a.trim().length>0);if(a)return a.trim()}return null}("object"==typeof e&&e&&"details"in e?e.details:void 0);throw Error(b?`${a}: ${b}`:a)}return e}a.s(["apiRequest",()=>b])},60240,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(75110);function e(){let[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),o=(0,c.useRef)(null),p=(0,c.useRef)(null),q=(0,c.useRef)(null),r=(a=!1)=>{h(!0),(0,d.apiRequest)(`/api/ev/voice/voices?sync=${a}`).then(a=>{f(a.voices),h(!1)}).catch(a=>{l(a.message),h(!1)})};(0,c.useEffect)(()=>(r(!0),()=>{q.current&&clearTimeout(q.current),p.current&&(p.current.stop(),p.current=null)}),[]);let s=async()=>{if(q.current&&(clearTimeout(q.current),q.current=null),p.current)try{await p.current.stop()}finally{p.current=null}},t=async()=>{j(!0);try{await (0,d.apiRequest)("/api/ev/voice/voices/sync",{method:"POST"}),r(!1)}catch{l("Failed to sync voices")}finally{j(!1)}},u=async b=>{if(l(null),await s(),b.previewSampleUrl){try{o.current&&(o.current.src=b.previewSampleUrl,await o.current.play()),n({voiceId:b.id,name:b.label,isVisible:!0,message:"Playing preview sample."}),setTimeout(()=>{n(a=>a?.voiceId===b.id?{...a,isVisible:!1}:a)},5e3)}catch{l("Failed to play preview sample.")}return}try{let c=await (0,d.apiRequest)(`/api/ev/voice/voices/preview-config?voiceId=${encodeURIComponent(b.id)}`),e=new(await a.A(40892)).default(c.preview.publicKey);p.current=e,n({voiceId:b.id,name:b.label,isVisible:!0,message:"Running live call preview."}),e.on("call-end",()=>{p.current===e&&(p.current=null),n(a=>a?.voiceId===b.id?{...a,isVisible:!1}:a)}),e.on("error",()=>{l("Live preview failed for this voice."),p.current===e&&(p.current=null),n(a=>a?.voiceId===b.id?{...a,isVisible:!1}:a)}),await e.start(c.preview.assistantId,c.preview.assistantOverrides),q.current=setTimeout(()=>{s(),n(a=>a?.voiceId===b.id?{...a,isVisible:!1}:a)},1e3*c.preview.timeoutSeconds)}catch(a){l(a instanceof Error?a.message:"Preview is unavailable for this voice."),n(a=>a?.voiceId===b.id?{...a,isVisible:!1}:a)}};return(0,b.jsxs)("div",{className:"voicesPage",children:[(0,b.jsx)("audio",{ref:o,hidden:!0}),(0,b.jsxs)("header",{className:"voicesHead",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"voicesTitle",children:"Voices"}),(0,b.jsx)("p",{className:"voicesSubtitle",children:"Explore and preview the voice catalog available for your agents."})]}),(0,b.jsx)("button",{className:"secondary syncBtn",onClick:t,disabled:i,children:i?"Syncing...":"Sync Voice Catalog"})]}),k&&(0,b.jsx)("div",{className:"error",children:k}),g?(0,b.jsx)("p",{className:"muted",children:"Loading voice catalog..."}):(0,b.jsx)("section",{className:"voicesGrid",children:e.map(a=>(0,b.jsxs)("article",{className:"voiceCard",children:[(0,b.jsxs)("div",{className:"voiceCardTop",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"voiceName",children:a.label}),(0,b.jsx)("p",{className:"voiceId",children:a.id})]}),(0,b.jsx)("span",{className:"voiceLocale",children:a.locale})]}),(0,b.jsx)("div",{className:"voiceActions",children:(0,b.jsxs)("button",{className:`playBtn ${m?.voiceId===a.id&&m.isVisible?"playing":""}`,onClick:()=>u(a),children:[(0,b.jsx)("span",{className:"playIcon",children:m?.voiceId===a.id&&m.isVisible?"ðŸ”Š":"â–¶"}),"Preview Voice"]})})]},a.id))}),m&&m.isVisible&&(0,b.jsxs)("div",{className:"previewNotification",children:[(0,b.jsx)("div",{className:"notifIcon",children:"ðŸŽ™ï¸"}),(0,b.jsxs)("div",{className:"notifContent",children:[(0,b.jsxs)("h4",{children:["Voice Preview: ",m.name]}),(0,b.jsx)("p",{children:m.message})]})]})]})}a.s(["default",()=>e])},40892,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__33f51609._.js"].map(b=>a.l(b))).then(()=>b(96226)))}];

//# sourceMappingURL=_c8848111._.js.map