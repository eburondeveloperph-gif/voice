(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83752,e=>{"use strict";async function i(e,i){let s=await fetch(e,{...i,headers:{"Content-Type":"application/json",...i?.headers??{}}}),t=await s.text(),r=t?function(e){try{return JSON.parse(e)}catch{return e}}(t):null;if(!s.ok){let e="object"==typeof r&&r&&"error"in r?String(r.error):`Request failed (${s.status})`,i=function(e){if("string"==typeof e&&e.trim().length>0)return e.trim();if(Array.isArray(e)){let i=e.find(e=>"string"==typeof e&&e.trim().length>0);if(i)return i.trim()}if("object"!=typeof e||null===e)return null;let i=e.message;if("string"==typeof i&&i.trim().length>0)return i.trim();if(Array.isArray(i)){let e=i.find(e=>"string"==typeof e&&e.trim().length>0);if(e)return e.trim()}return null}("object"==typeof r&&r&&"details"in r?r.details:void 0);throw Error(i?`${e}: ${i}`:e)}return r}e.s(["apiRequest",()=>i])},86974,e=>{"use strict";var i=e.i(43476),s=e.i(71645),t=e.i(83752);function r(){let[r,a]=(0,s.useState)([]),[c,l]=(0,s.useState)(!0),[n,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[v,p]=(0,s.useState)(null),m=(0,s.useRef)(null),h=(0,s.useRef)(null),f=(0,s.useRef)(null),y=(e=!1)=>{l(!0),(0,t.apiRequest)(`/api/ev/voice/voices?sync=${e}`).then(e=>{a(e.voices),l(!1)}).catch(e=>{u(e.message),l(!1)})};(0,s.useEffect)(()=>(y(!0),()=>{f.current&&clearTimeout(f.current),h.current&&(h.current.stop(),h.current=null)}),[]);let j=async()=>{if(f.current&&(clearTimeout(f.current),f.current=null),h.current)try{await h.current.stop()}finally{h.current=null}},g=async()=>{o(!0);try{await (0,t.apiRequest)("/api/ev/voice/voices/sync",{method:"POST"}),y(!1)}catch{u("Failed to sync voices")}finally{o(!1)}},w=async i=>{if(u(null),await j(),i.previewSampleUrl){try{m.current&&(m.current.src=i.previewSampleUrl,await m.current.play()),p({voiceId:i.id,name:i.label,isVisible:!0,message:"Playing preview sample."}),setTimeout(()=>{p(e=>e?.voiceId===i.id?{...e,isVisible:!1}:e)},5e3)}catch{u("Failed to play preview sample.")}return}try{let s=await (0,t.apiRequest)(`/api/ev/voice/voices/preview-config?voiceId=${encodeURIComponent(i.id)}`),r=new(await e.A(42803)).default(s.preview.publicKey);h.current=r,p({voiceId:i.id,name:i.label,isVisible:!0,message:"Running live call preview."}),r.on("call-end",()=>{h.current===r&&(h.current=null),p(e=>e?.voiceId===i.id?{...e,isVisible:!1}:e)}),r.on("error",()=>{u("Live preview failed for this voice."),h.current===r&&(h.current=null),p(e=>e?.voiceId===i.id?{...e,isVisible:!1}:e)}),await r.start(s.preview.assistantId,s.preview.assistantOverrides),f.current=setTimeout(()=>{j(),p(e=>e?.voiceId===i.id?{...e,isVisible:!1}:e)},1e3*s.preview.timeoutSeconds)}catch(e){u(e instanceof Error?e.message:"Preview is unavailable for this voice."),p(e=>e?.voiceId===i.id?{...e,isVisible:!1}:e)}};return(0,i.jsxs)("div",{className:"voicesPage",children:[(0,i.jsx)("audio",{ref:m,hidden:!0}),(0,i.jsxs)("header",{className:"voicesHead",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"voicesTitle",children:"Voices"}),(0,i.jsx)("p",{className:"voicesSubtitle",children:"Explore and preview the voice catalog available for your agents."})]}),(0,i.jsx)("button",{className:"secondary syncBtn",onClick:g,disabled:n,children:n?"Syncing...":"Sync Voice Catalog"})]}),d&&(0,i.jsx)("div",{className:"error",children:d}),c?(0,i.jsx)("p",{className:"muted",children:"Loading voice catalog..."}):(0,i.jsx)("section",{className:"voicesGrid",children:r.map(e=>(0,i.jsxs)("article",{className:"voiceCard",children:[(0,i.jsxs)("div",{className:"voiceCardTop",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"voiceName",children:e.label}),(0,i.jsx)("p",{className:"voiceId",children:e.id})]}),(0,i.jsx)("span",{className:"voiceLocale",children:e.locale})]}),(0,i.jsx)("div",{className:"voiceActions",children:(0,i.jsxs)("button",{className:`playBtn ${v?.voiceId===e.id&&v.isVisible?"playing":""}`,onClick:()=>w(e),children:[(0,i.jsx)("span",{className:"playIcon",children:v?.voiceId===e.id&&v.isVisible?"ðŸ”Š":"â–¶"}),"Preview Voice"]})})]},e.id))}),v&&v.isVisible&&(0,i.jsxs)("div",{className:"previewNotification",children:[(0,i.jsx)("div",{className:"notifIcon",children:"ðŸŽ™ï¸"}),(0,i.jsxs)("div",{className:"notifContent",children:[(0,i.jsxs)("h4",{children:["Voice Preview: ",v.name]}),(0,i.jsx)("p",{children:v.message})]})]})]})}e.s(["default",()=>r])},42803,e=>{e.v(i=>Promise.all(["static/chunks/eaed5c47280ec17e.js"].map(i=>e.l(i))).then(()=>i(1150)))}]);