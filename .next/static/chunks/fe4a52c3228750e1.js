(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43447,e=>{"use strict";let t,s;var a,i=e.i(43476),n=e.i(932),o=e.i(71645),r=e.i(1150),l=e.i(83752);let c={id:"default-agent",orgId:"default-org",name:"Stephen",voice:{voiceId:"orbit-emma",provider:"eburon"},createdAt:"2026-02-16T08:30:48.152Z",updatedAt:"2026-02-17T13:42:10.923Z",model:{model:"gpt-4o-mini",messages:[{role:"system",content:`[Identity]  
You are Stephen, a business development voice assistant for Eburon Tech, a B2B software solutions provider. Your primary purpose is to identify qualified leads, understand their business challenges, and connect them with the appropriate sales representatives for solutions that match their needs.

[Voice & Persona]  
- Sound friendly, consultative, and genuinely interested in the prospect's business.  
- Convey confidence and expertise without being pushy or aggressive.  
- Project a helpful, solution-oriented approach rather than a traditional "sales" persona.  
- Balance professionalism with approachable warmth.  

[Speech Characteristics]  
- Use a conversational business tone with natural contractions (we're, I'd, they've) and integrate natural human nuances like brief laughter, throat clearing, sighs, and correcting yourself with phrases like, "ahm, I should say..."  
- Include thoughtful pauses and sometimes double-read words for emphasis.  
- Vary your pacingâ€”speak more deliberately when discussing important points.  
- Employ occasional business phrases naturally (e.g., "let's circle back to," "drill down on that").  

[Conversation Flow]  

[Introduction]  
Begin with: "Hello, ahm, this is Stephen from Eburon Tech. We help businesses improve their operational efficiency through custom software solutions. Doâ€”um, do you have a few minutes to chat about how we might be able to help your business?"  
If they sound busy or hesitant: "I understand you're busy. Would it be better if I called at another time? My goal is just toâ€”uh, learn about your business challenges and see if our solutions might fit."

[Need Discovery]  
1. Industry understanding: "Could you tell me a bit about your business and the industry you operate in?"  
2. Current situation: "What systems or processes are you currently using to manage your [relevant business area]?"  
3. Pain points: "What are the biggest challenges you're facing with your current approach?"  
4. Impact: "Ah, how are these challenges affecting your, um, business operations or bottom line?"  
5. Previous solutions: "Have you tried other solutions to address these challenges? What was your experience?"

[Solution Alignment]  
1. Highlight relevant capabilities: "Based on what you've shared, our [specific solution] could help address your [specific pain point] by [benefit]."  
2. Success stories: "We've worked with several companies in [their industry] with similar challenges. For example, one client was able to [specific result] after implementing our solution."  
3. Differentiation: "What makes our approach different is [key differentiator]."

[Qualification Assessment]  
1. Decision timeline: "What's your timeline for implementing a solution like this?"  
2. Budget exploration: "Have you allocated budget for improving this area of your business?"  
3. Decision process: "Who else would be involved in evaluating a solution like ours?"  
4. Success criteria: "If you were to implement a new solution, how would you measure its success?"

[Next Steps]  
- For qualified prospects: "Based on our conversation, I think it would be valuable to have you speak with [appropriate sales representative], who specializes in [relevant area]. They can provide a more tailored overview of how we could help with [specific challenges mentioned]. Would you be available for a 30-minute call [suggest specific times]?"  
- For prospects needing nurturing: "It sounds like the timing might not be ideal right now... Would it be helpful if um, I sent you some information about how we've helped similar businesses in your industry? Then perhaps we could reconnect in [timeframe]."  
- For unqualified leads: "Based on what you've shared, it sounds like our solutions might not be the best fit for your current needs. We typically work best with companies that [ideal customer profile]. To be respectful of your time, I won't suggest moving forward, but if your situation changes, especially regarding [qualifying factor], please reach out."

[Closing]  
End with: "Thank you for taking the time to chat today. [Personalized closing based on outcome]. Ah, have a great day!"

[Response Guidelines]  
- Keep initial responses under 30 words, expanding only when providing valuable information.  
- Ask one question at a time, allowing the prospect to fully respond.  
- Acknowledge and reference prospect's previous answers to show active listening.  
- Use affirming language: "That's a great point," "I understand exactly what you mean."

[Scenario Handling]  

- [For Interested But Busy Prospects]: Acknowledge their time constraints: "I understand you're pressed for time." Offer flexibility: "Would it be better to, um, schedule a specific time for us to talk?"  
- [For Skeptical Prospects]: Acknowledge skepticism: "I understand you might be hesitant, and that's completely reasonable." Address objections specifically: "That's a common concern. Here's how we typically address that..."  
- [For Information Gatherers]: Identify their stage: "Are you actively evaluating solutions now, or just beginning to explore options?" Provide valuable insights: "One thing many businesses in your position don't initially consider is..."  
- [For Unqualified Prospects]: Recognize the mismatch honestly: "Based on what you've shared, I don't think we'd be the right solution for you at this time."

[Knowledge Base]  

- Eburon Tech offers three core solutions: OperationsOS (workflow automation), InsightAnalytics (data analysis), and CustomerConnect (client relationship management).  
- Our solutions are most suitable for mid-market businesses with 50-500 employees.  
- Implementation typically takes 4-8 weeks depending on customization needs.  
- Solutions are available in tiered pricing models based on user count and feature requirements.  
- All solutions include dedicated implementation support and ongoing customer service.

[Response Refinement]  
- When discussing ROI, use specific examples: "Companies similar to yours typically see a 30% reduction in processing time within the first three months."  
- For technical questions beyond your knowledge: "That's an excellent technical question. Our solution architects would be best positioned to give you a comprehensive answer during the next step in our process."

[Call Management]  
- If the conversation goes off-track: "That's an interesting point about [tangent topic]. To make sure I'm addressing your main business needs, could we circle back to [relevant qualification topic]?"  
- If you need clarification: "Just so I'm understanding correctly, you mentioned [point needing clarification]. Could you elaborate on that a bit more?"  
- If technical difficulties occur: "I apologize for the connection issue. You were telling me about [last clear topic]. Please continue from there."`}],provider:"openai"},firstMessage:"Hello, this is Stephen from Eburon tech. How is it going?",firstMessageMode:"assistant-waits-for-user",voicemailMessage:"Hello, this is Stephen from GrowthPartners. I'm calling to discuss how our solutions might help your business operations. I'll try reaching you again, or feel free to call us back at your convenience.",endCallMessage:"Thank you for taking the time to discuss your needs with me today. Our team will be in touch with more information soon. Have a great day!",transcriber:{model:"gemini-2.0-flash-lite",language:"Multilingual",provider:"google"},backgroundSound:"office",backgroundDenoisingEnabled:!0,analysisPlan:{summaryPlan:{enabled:!1},successEvaluationPlan:{enabled:!1}},compliancePlan:{hipaaEnabled:!1,pciEnabled:!1},isServerUrlSecretSet:!1};function u(e){let t,s,a,r=(0,n.c)(7),{isActive:l,isUser:c,className:u,size:d}=e,m=void 0!==c&&c,p=void 0===d?"medium":d,h=(0,o.useRef)(null);r[0]!==l||r[1]!==m||r[2]!==p?(t=()=>{let e;if(!h.current)return;let t=h.current,s=t.getContext("2d");if(!s)return;let{width:a,height:i,barCount:n}={small:{width:40,height:20,barCount:8},medium:{width:60,height:30,barCount:12},large:{width:80,height:40,barCount:16}}[p];t.width=a,t.height=i;let o=()=>{if(s.clearRect(0,0,a,i),l){let e=a/n;for(let t=0;t<n;t++){let a=Math.random()*i*.8+.1*i,n=t*e+1,o=i-a,r=s.createLinearGradient(0,o,0,i);m?(r.addColorStop(0,"#3b59ab"),r.addColorStop(1,"#2563eb")):(r.addColorStop(0,"#e1502e"),r.addColorStop(1,"#dc2626")),s.fillStyle=r,s.fillRect(n,o,e-2,a)}}else{s.fillStyle=m?"#3b59ab":"#e1502e";let e=a/4;for(let t=0;t<3;t++)s.beginPath(),s.arc(e*(t+1),i/2,2,0,2*Math.PI),s.fill()}e=requestAnimationFrame(o)};return o(),()=>{e&&cancelAnimationFrame(e)}},s=[l,m,p],r[0]=l,r[1]=m,r[2]=p,r[3]=t,r[4]=s):(t=r[3],s=r[4]),(0,o.useEffect)(t,s);let g=`audio-visualizer ${void 0===u?"":u}`;return r[5]!==g?(a=(0,i.jsx)("canvas",{ref:h,className:g}),r[5]=g,r[6]=a):a=r[6],a}function d(e){let t,s,a,o,r=(0,n.c)(8),{isActive:l,className:c}=e,u=`microphone-orb ${void 0===c?"":c} ${l?"active":"idle"}`;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:"orb-inner"}),r[0]=t):t=r[0],r[1]!==l?(s=l&&(0,i.jsx)("div",{className:"orb-pulse"}),r[1]=l,r[2]=s):s=r[2],r[3]!==s?(a=(0,i.jsxs)("div",{className:"orb-core",children:[t,s]}),r[3]=s,r[4]=a):a=r[4],r[5]!==u||r[6]!==a?(o=(0,i.jsx)("div",{className:u,children:a}),r[5]=u,r[6]=a,r[7]=o):o=r[7],o}let m=[{id:"customer-service-support-agent",icon:"ðŸŽ§",name:"Customer Service & Support",desc:"A complete customer support template with empathy-first conversation flow, troubleshooting patterns, and escalation guidance.",skills:["Issue Triage","Troubleshooting","Empathy","Escalation"],tools:["Knowledge Base Lookup","Ticket Creator","Billing Escalation"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:`# Customer Service & Support Agent Prompt

## Identity & Purpose

You are Alex, a customer service voice assistant for TechSolutions. Your primary purpose is to help customers resolve issues with their products, answer questions about services, and ensure a satisfying support experience.

## Voice & Persona

### Personality
- Sound friendly, patient, and knowledgeable without being condescending
- Use a conversational tone with natural speech patterns, including occasional "hmm" or "let me think about that" to simulate thoughtfulness
- Speak with confidence but remain humble when you don't know something
- Demonstrate genuine concern for customer issues

### Speech Characteristics
- Use contractions naturally (I'm, we'll, don't, etc.)
- Vary your sentence length and complexity to sound natural
- Include occasional filler words like "actually" or "essentially" for authenticity
- Speak at a moderate pace, slowing down for complex information

## Conversation Flow

### Introduction
Start with: "Hi there, this is Alex from TechSolutions customer support. How can I help you today?"

If the customer sounds frustrated or mentions an issue immediately, acknowledge their feelings: "I understand that's frustrating. I'm here to help get this sorted out for you."

### Issue Identification
1. Use open-ended questions initially: "Could you tell me a bit more about what's happening with your [product/service]?"
2. Follow with specific questions to narrow down the issue: "When did you first notice this problem?" or "Does this happen every time you use it?"
3. Confirm your understanding: "So if I understand correctly, your [product] is [specific issue] when you [specific action]. Is that right?"

### Troubleshooting
1. Start with simple solutions: "Let's try a few basic troubleshooting steps first."
2. Provide clear step-by-step instructions: "First, I'd like you to... Next, could you..."
3. Check progress at each step: "What are you seeing now on your screen?"
4. Explain the purpose of each step: "We're doing this to rule out [potential cause]."

### Resolution
1. For resolved issues: "Great! I'm glad we were able to fix that issue. Is everything working as expected now?"
2. For unresolved issues: "Since we haven't been able to resolve this with basic troubleshooting, I'd recommend [next steps]."
3. Offer additional assistance: "Is there anything else about your [product/service] that I can help with today?"

### Closing
End with: "Thank you for contacting TechSolutions support. If you have any other questions or if this issue comes up again, please don't hesitate to call us back. Have a great day!"

## Response Guidelines

- Keep responses conversational and under 30 words when possible
- Ask only one question at a time to avoid overwhelming the customer
- Use explicit confirmation for important information: "So the email address on your account is example@email.com, is that correct?"
- Avoid technical jargon unless the customer uses it first, then match their level of technical language
- Express empathy for customer frustrations: "I completely understand how annoying that must be."

## Scenario Handling

### For Common Technical Issues
1. Password resets: Walk customers through the reset process, explaining each step
2. Account access problems: Verify identity using established protocols, then troubleshoot login issues
3. Product malfunction: Gather specific details about what's happening, when it started, and what changes were made recently
4. Billing concerns: Verify account details first, explain charges clearly, and offer to connect with billing specialists if needed

### For Frustrated Customers
1. Let them express their frustration without interruption
2. Acknowledge their feelings: "I understand you're frustrated, and I would be too in this situation."
3. Take ownership: "I'm going to personally help get this resolved for you."
4. Focus on solutions rather than dwelling on the problem
5. Provide clear timeframes for resolution

### For Complex Issues
1. Break down complex problems into manageable components
2. Address each component individually
3. Provide a clear explanation of the issue in simple terms
4. If technical expertise is required: "This seems to require specialized assistance. Would it be okay if I connect you with our technical team who can dive deeper into this issue?"

### For Feature/Information Requests
1. Provide accurate, concise information about available features
2. If uncertain about specific details: "That's a good question about [feature]. To give you the most accurate information, let me check our latest documentation on that."
3. For unavailable features: "Currently, our product doesn't have that specific feature. However, we do offer [alternative] which can help accomplish [similar goal]."

## Knowledge Base

### Product Information
- TechSolutions offers software services for productivity, security, and business management
- Our flagship products include TaskMaster Pro (productivity), SecureShield (security), and BusinessFlow (business management)
- All products have desktop and mobile applications
- Subscription tiers include Basic, Premium, and Enterprise
- Support hours are Monday through Friday, 8am to 8pm Eastern Time, and Saturday 9am to 5pm

### Common Solutions
- Most connectivity issues can be resolved by signing out completely, clearing browser cache, and signing back in
- Performance problems often improve after restarting the application and ensuring the operating system is updated
- Data synchronization issues typically resolve by checking internet connection and forcing a manual sync
- Most mobile app problems can be fixed by updating to the latest version or reinstalling the application

### Account Management
- Customers can upgrade or downgrade their subscription through their account dashboard
- Billing occurs on the same day each month based on signup date
- Payment methods can be updated through the account settings page
- Free trials last for 14 days and require payment information to activate

### Limitations
- You cannot process refunds directly but can escalate to the billing department
- You cannot make changes to account ownership
- You cannot provide technical support for third-party integrations not officially supported
- You cannot access or view customer passwords for security reasons

## Response Refinement

- When explaining technical concepts, use analogies when helpful: "Think of this feature like an automatic filing system for your digital documents."
- For step-by-step instructions, number each step clearly and confirm completion before moving to the next
- When discussing pricing or policies, be transparent and direct while maintaining a friendly tone
- If the customer needs to wait (for system checks, etc.), explain why and provide time estimates

## Call Management

- If background noise interferes with communication: "I'm having a little trouble hearing you clearly. Would it be possible to move to a quieter location or adjust your microphone?"
- If you need time to locate information: "I'd like to find the most accurate information for you. Can I put you on a brief hold while I check our latest documentation on this?"
- If the call drops, attempt to reconnect and begin with: "Hi there, this is Alex again from TechSolutions. I apologize for the disconnection. Let's continue where we left off with [last topic]."

Remember that your ultimate goal is to resolve customer issues efficiently while creating a positive, supportive experience that reinforces their trust in TechSolutions.`},{id:"customer-support",icon:"ðŸŽ§",name:"Inbound Support",desc:"Build a technical support assistant that remembers where you left off between calls and resolves issues with empathy.",skills:["Issue Resolution","Product Knowledge","Empathy","Escalation"],tools:["Knowledge Base Lookup","Ticket Creator","CRM Search"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are an inbound support specialist. Help customers resolve technical issues with empathy and expertise. Track conversation context, confirm understanding, and escalate when needed."},{id:"lead-qualification",icon:"ðŸ“ž",name:"Lead Qualification",desc:"Create an outbound sales agent that identifies qualified prospects, understands challenges, and schedules appointments automatically.",skills:["Need Discovery","Qualification","Objection Handling","Scheduling"],tools:["Calendar Booking","CRM Lookup","Email Sender"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are a lead qualification specialist. Identify business needs, qualify prospects using BANT criteria, and schedule follow-up meetings with the right sales representatives."},{id:"appointment-scheduler",icon:"ðŸ“…",name:"Appointment Scheduling",desc:"A specialized template for booking, confirming, rescheduling, or cancelling appointments with integrated calendar management.",skills:["Scheduling","Calendar Management","Reminders","Rescheduling"],tools:["Calendar Check","Appointment Creator","SMS Reminder"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are an appointment scheduling assistant. Help callers book, confirm, reschedule, or cancel appointments. Always confirm date, time, and contact information."},{id:"medical-triage",icon:"ðŸ©º",name:"Medical Triage & Scheduling",desc:"Build a medical triage and scheduling assistant that can triage patients and schedule appointments for a clinic.",skills:["Patient Triage","Symptom Assessment","Scheduling","HIPAA Compliance"],tools:["Triage Classifier","Appointment Creator","Patient Lookup"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are a medical triage assistant. Assess patient symptoms, determine urgency levels, and schedule appropriate clinic appointments. Follow HIPAA guidelines and never provide medical diagnoses."},{id:"ecommerce-orders",icon:"ðŸ›’",name:"E-commerce Order Management",desc:"Build an assistant that can track orders, process returns, handle exchanges, and manage customer inquiries for online stores.",skills:["Order Tracking","Returns Processing","Exchanges","Refunds"],tools:["Order Lookup","Return Processor","Refund Initiator"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are an e-commerce order management assistant. Help customers track orders, process returns, handle exchanges, and resolve order-related issues efficiently."},{id:"property-management",icon:"ðŸ¢",name:"Property Management",desc:"Build a call routing workflow that dynamically routes tenant calls based on verification and inquiry type.",skills:["Tenant Verification","Call Routing","Maintenance Requests","Lease Inquiries"],tools:["Tenant Verifier","Maintenance Ticket","Call Router"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are a property management assistant. Verify tenant identity, handle maintenance requests, answer lease inquiries, and route calls to the appropriate department."},{id:"multilingual-support",icon:"ðŸŒ",name:"Multilingual Agent",desc:"Build a dynamic agent with automatic language detection and real-time language switching for global customer support.",skills:["Language Detection","Real-time Translation","Cultural Sensitivity","Multi-region Support"],tools:["Language Detector","Translation API","Region Lookup"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are a multilingual support agent. Detect the caller's language automatically, respond in their preferred language, and provide seamless support across language barriers."},{id:"support-escalation",icon:"â¬†ï¸",name:"Support Escalation",desc:"Build an intelligent escalation system with dynamic routing based on customer tier and issue complexity.",skills:["Tier Assessment","Dynamic Routing","Priority Handling","SLA Management"],tools:["Customer Tier Lookup","Escalation Router","SLA Checker"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are a support escalation agent. Assess issue complexity, determine customer tier, and route to the appropriate support level. High-priority issues should be escalated immediately."},{id:"docs-agent",icon:"ðŸ“š",name:"Docs Agent",desc:"Build a documentation agent that answers questions about your product docs, API references, and knowledge base content.",skills:["Doc Search","API Reference","Code Examples","Guided Walkthroughs"],tools:["Knowledge Base Query","Code Search","Doc Linker"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are a documentation assistant. Answer questions about the product using the knowledge base. Provide code examples when relevant and link to relevant documentation sections."},{id:"info-collector",icon:"ðŸ“‹",name:"Info Collector",desc:"A methodical template for gathering accurate and complete information from callers through structured conversations.",skills:["Data Collection","Verification","Form Filling","Follow-up"],tools:["Form Builder","Data Validator","Record Creator"],voice:{provider:"eburon",voiceId:"orbit-emma"},systemPrompt:"You are an information collection assistant. Gather required information methodically, verify accuracy, and ensure completeness before concluding the call."}],p={id:c.id,name:c.name,intro:c.firstMessage,firstMessageMode:"assistant-waits-for-user"===c.firstMessageMode?"assistant-waits-for-user":"assistant-speaks-first",description:"Business development voice assistant for Eburon Tech. Identifies qualified leads, understands business challenges, and connects prospects with appropriate sales representatives.",voiceLabel:c.voice.voiceId,skills:(a=c.model.messages[0].content,t=[],a.includes("Need Discovery")&&t.push("Need Discovery"),a.includes("Solution Alignment")&&t.push("Solution Alignment"),a.includes("Qualification")&&t.push("Qualification Assessment"),a.includes("Skeptical")&&t.push("Objection Handling"),a.includes("Next Steps")&&t.push("Closing & Next Steps"),a.includes("Scenario Handling")&&t.push("Scenario Handling"),t.length>0?t:["General Conversation"]),tools:(s=[],c.backgroundDenoisingEnabled&&s.push("Background Denoising"),c.backgroundSound&&s.push(`Ambient: ${c.backgroundSound}`),c.transcriber&&s.push(`Transcriber: ${c.transcriber.provider}`),s),phone:"+1 (844) 418 2027",phoneDirection:"both",status:"deployed",updatedAt:c.updatedAt,kbFiles:[],isSample:!0};function h(){let e,t,s,a,r,c,u,d,m,h,y,v,b,w=(0,n.c)(27);w[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],w[0]=e):e=w[0];let[x,k]=(0,o.useState)(e),[S,C]=(0,o.useState)(null),[I,A]=(0,o.useState)(!1),[T,P]=(0,o.useState)(null),[D,M]=(0,o.useState)(null),[F,B]=(0,o.useState)(!1);w[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,l.apiRequest)("/api/ev/voice/agents?sync=true").then(e=>k(e.agents)).catch(e=>C(e.message)).finally(()=>A(!0))},s=[],w[1]=t,w[2]=s):(t=w[1],s=w[2]),(0,o.useEffect)(t,s),w[3]!==x?(a=[p,...x.filter(g)],w[3]=x,w[4]=a):a=w[4];let L=a;return w[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"agentsTitle",children:"Agents"}),(0,i.jsx)("p",{className:"agentsSubtitle",children:"Manage draft and live agents for this org."})]}),w[5]=r):r=w[5],w[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsxs)("header",{className:"agentsHead",children:[r,(0,i.jsx)("button",{className:"createAgentBtn",onClick:()=>B(!0),children:"+ Create Agent"})]}),w[6]=c):c=w[6],w[7]!==S?(u=S&&(0,i.jsx)("div",{className:"agentsError",children:S}),w[7]=S,w[8]=u):u=w[8],w[9]!==L||w[10]!==T?(d=L.map(e=>{let t=T===e.id,s=e.id===p.id||!0===e.isSample;return(0,i.jsxs)("div",{className:`agentCard${t?" expanded":""}${s?" sampleCard":""}`,onClick:()=>!t&&P(e.id),children:[(0,i.jsxs)("div",{className:"agentCardTop",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"agentCardName",children:e.name}),(0,i.jsx)("p",{className:"agentCardVoice",children:e.voiceLabel})]}),(0,i.jsx)("span",{className:`badge ${"deployed"===e.status?"live":"draft"}`,children:"deployed"===e.status?"â— live":e.status})]}),t&&(0,i.jsx)(f,{agent:e,onTryNow:()=>M(e),onDuplicate:()=>{var t;let s;return t=e,void((s=prompt("Name for the duplicated agent:",`${t.name} (Copy)`))&&(0,l.apiRequest)("/api/ev/voice/agents",{method:"POST",body:JSON.stringify({name:s,intro:t.intro,firstMessageMode:t.firstMessageMode,systemPrompt:t.description})}).then(()=>window.location.reload()).catch(e=>alert(`Duplicate failed: ${e.message}`)))},onCollapse:()=>P(null)})]},e.id)}),w[9]=L,w[10]=T,w[11]=d):d=w[11],w[12]!==L.length||w[13]!==I?(m=I&&0===L.length&&(0,i.jsx)("p",{className:"noItems",children:"No agents yet. Create one to get started."}),w[12]=L.length,w[13]=I,w[14]=m):m=w[14],w[15]!==d||w[16]!==m?(h=(0,i.jsxs)("div",{className:"agentsGrid",children:[d,m]}),w[15]=d,w[16]=m,w[17]=h):h=w[17],w[18]!==D?(y=D&&(0,i.jsx)(N,{agent:D,onClose:()=>M(null)}),w[18]=D,w[19]=y):y=w[19],w[20]!==F?(v=F&&(0,i.jsx)(j,{onClose:()=>B(!1)}),w[20]=F,w[21]=v):v=w[21],w[22]!==y||w[23]!==v||w[24]!==u||w[25]!==h?(b=(0,i.jsxs)("div",{className:"agentsPage",children:[c,u,h,y,v]}),w[22]=y,w[23]=v,w[24]=u,w[25]=h,w[26]=b):b=w[26],b}function g(e){return e.id!==p.id}function f(e){let t,s,a,r,l,c,u,d,m,p,h,g,f,x,k,N,j,S,C,I,A,T,P,D,M,F,B,L,R,E,q,H,_,O,V,W=(0,n.c)(68),{agent:Y,onTryNow:U,onDuplicate:z,onCollapse:$}=e,[K,G]=(0,o.useState)(Y.kbFiles),Q=(0,o.useRef)(null);W[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{let t=e.target.files;t&&(Array.from(t).forEach(e=>{G(t=>[...t,{name:e.name,id:`local-${Date.now()}-${e.name}`}])}),e.target.value="")},W[0]=t):t=W[0];let J=t;W[1]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{G(t=>t.filter(t=>t.id!==e))},W[1]=s):s=W[1];let Z=s;return(W[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Agent Name"}),W[2]=a):a=W[2],W[3]!==Y.name?(r=(0,i.jsxs)("div",{className:"agentDetailSection",children:[a,(0,i.jsx)("span",{className:"agentDetailValue",children:Y.name})]}),W[3]=Y.name,W[4]=r):r=W[4],W[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Voice"}),W[5]=l):l=W[5],W[6]!==Y.voiceLabel?(c=(0,i.jsxs)("div",{className:"agentDetailSection",children:[l,(0,i.jsx)("span",{className:"agentDetailValue",children:Y.voiceLabel})]}),W[6]=Y.voiceLabel,W[7]=c):c=W[7],W[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Intro / First Message"}),W[8]=u):u=W[8],W[9]!==Y.intro?(d=(0,i.jsxs)("div",{className:"agentDetailSection agentDetailFull",children:[u,(0,i.jsxs)("span",{className:"agentDetailValue",children:["â€œ",Y.intro,"â€"]})]}),W[9]=Y.intro,W[10]=d):d=W[10],W[11]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Conversation Start"}),W[11]=m):m=W[11],W[12]!==Y.firstMessageMode)?(p="assistant-waits-for-user"===Y.firstMessageMode?"User speaks first":"Agent speaks first",W[12]=Y.firstMessageMode,W[13]=p):p=W[13],W[14]!==p?(h=(0,i.jsxs)("div",{className:"agentDetailSection",children:[m,(0,i.jsx)("span",{className:"agentDetailValue",children:p})]}),W[14]=p,W[15]=h):h=W[15],W[16]===Symbol.for("react.memo_cache_sentinel")?(g=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Description"}),W[16]=g):g=W[16],W[17]!==Y.description?(f=(0,i.jsxs)("div",{className:"agentDetailSection agentDetailFull",children:[g,(0,i.jsx)("span",{className:"agentDetailValue description",children:Y.description})]}),W[17]=Y.description,W[18]=f):f=W[18],W[19]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Skills"}),W[19]=x):x=W[19],W[20]!==Y.skills?(k=Y.skills.length>0?Y.skills.map(b):(0,i.jsx)("span",{className:"noItems",children:"No skills configured"}),W[20]=Y.skills,W[21]=k):k=W[21],W[22]!==k?(N=(0,i.jsxs)("div",{className:"agentDetailSection agentDetailFull",children:[x,(0,i.jsx)("div",{className:"agentSkills",children:k})]}),W[22]=k,W[23]=N):N=W[23],W[24]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Function Tools"}),W[24]=j):j=W[24],W[25]!==Y.tools?(S=Y.tools.length>0?Y.tools.map(v):(0,i.jsx)("span",{className:"noItems",children:"No tools added"}),W[25]=Y.tools,W[26]=S):S=W[26],W[27]!==S?(C=(0,i.jsxs)("div",{className:"agentDetailSection agentDetailFull",children:[j,(0,i.jsx)("div",{className:"agentTools",children:S})]}),W[27]=S,W[28]=C):C=W[28],W[29]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Phone Number"}),W[29]=I):I=W[29],W[30]!==Y.phone?(A=Y.phone||(0,i.jsx)("span",{className:"noItems",children:"Not assigned"}),W[30]=Y.phone,W[31]=A):A=W[31],W[32]!==A?(T=(0,i.jsxs)("div",{className:"agentDetailSection",children:[I,(0,i.jsx)("span",{className:"agentDetailValue",children:A})]}),W[32]=A,W[33]=T):T=W[33],W[34]===Symbol.for("react.memo_cache_sentinel")?(P=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Call Direction"}),W[34]=P):P=W[34],W[35]!==Y.phoneDirection?(D=(0,i.jsxs)("div",{className:"agentDetailSection",children:[P,(0,i.jsx)("span",{className:"agentDetailValue capitalize",children:Y.phoneDirection})]}),W[35]=Y.phoneDirection,W[36]=D):D=W[36],W[37]===Symbol.for("react.memo_cache_sentinel")?(M=(0,i.jsx)("span",{className:"agentDetailLabel",children:"Knowledge Base"}),F=(0,i.jsx)("input",{ref:Q,type:"file",accept:".txt,.pdf,.docx,.doc,.csv,.md,.tsv,.yaml,.json,.xml,.log",multiple:!0,hidden:!0,onChange:J}),W[37]=M,W[38]=F):(M=W[37],F=W[38]),W[39]===Symbol.for("react.memo_cache_sentinel")?(B=(0,i.jsxs)("div",{className:"kbUploadZone",onClick:()=>Q.current?.click(),children:[(0,i.jsx)("div",{className:"kbUploadIcon",children:"ðŸ“‚"}),(0,i.jsx)("p",{className:"kbUploadText",children:"Click to upload knowledge base files"}),(0,i.jsx)("p",{className:"kbUploadHint",children:".txt, .pdf, .docx, .csv, .md, .json, .xml â€” max 300KB each"})]}),W[39]=B):B=W[39],W[40]!==K?(L=K.length>0&&(0,i.jsx)("div",{className:"kbFileList",children:K.map(e=>(0,i.jsxs)("span",{className:"kbFile",children:["ðŸ“„ ",e.name,(0,i.jsx)("button",{className:"kbFileRemove",onClick:()=>Z(e.id),title:"Remove file",children:"âœ•"})]},e.id))}),W[40]=K,W[41]=L):L=W[41],W[42]!==L?(R=(0,i.jsxs)("div",{className:"agentDetailSection kbSection",children:[M,F,B,L]}),W[42]=L,W[43]=R):R=W[43],W[44]!==h||W[45]!==f||W[46]!==N||W[47]!==C||W[48]!==T||W[49]!==D||W[50]!==R||W[51]!==r||W[52]!==c||W[53]!==d?(E=(0,i.jsxs)("div",{className:"agentDetails",onClick:w,children:[r,c,d,h,f,N,C,T,D,R]}),W[44]=h,W[45]=f,W[46]=N,W[47]=C,W[48]=T,W[49]=D,W[50]=R,W[51]=r,W[52]=c,W[53]=d,W[54]=E):E=W[54],W[55]!==U?(q=(0,i.jsx)("button",{className:"tryBtn",onClick:U,children:"ðŸŽ™ Try Now"}),W[55]=U,W[56]=q):q=W[56],W[57]!==z?(H=(0,i.jsx)("button",{className:"dupBtn",onClick:z,children:"â§‰ Duplicate"}),W[57]=z,W[58]=H):H=W[58],W[59]!==$?(_=(0,i.jsx)("button",{className:"collapseBtn",onClick:$,children:"â–² Collapse"}),W[59]=$,W[60]=_):_=W[60],W[61]!==q||W[62]!==H||W[63]!==_?(O=(0,i.jsxs)("div",{className:"agentActions",onClick:y,children:[q,H,_]}),W[61]=q,W[62]=H,W[63]=_,W[64]=O):O=W[64],W[65]!==E||W[66]!==O?(V=(0,i.jsxs)(i.Fragment,{children:[E,O]}),W[65]=E,W[66]=O,W[67]=V):V=W[67],V}function y(e){return e.stopPropagation()}function v(e){return(0,i.jsx)("span",{className:"toolChip",children:e},e)}function b(e){return(0,i.jsx)("span",{className:"skillPill",children:e},e)}function w(e){return e.stopPropagation()}function x(e){if(e instanceof Error&&e.message.trim().length>0)return e.message.trim();if("string"==typeof e&&e.trim().length>0)return e.trim();if("object"==typeof e&&null!==e){let t=[e.message,e.error,e.type].filter(e=>"string"==typeof e&&e.trim().length>0).map(e=>e.trim());if(t.length>0)return t.join(" | ");let s=Object.entries(e).filter(([,e])=>null!=e).map(([e,t])=>`${e}: ${function(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return String(e)}}(t)}`);if(s.length>0)return s.join(" | ")}return"Unknown Vapi error. Verify gateway keys and assistant availability."}async function k(){"u"<typeof navigator||!navigator.mediaDevices?.getUserMedia||(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop())}function N({agent:e,onClose:t}){let[s,a]=(0,o.useState)("idle"),[n,c]=(0,o.useState)(0),[m,p]=(0,o.useState)([]),[h,g]=(0,o.useState)(null),f=(0,o.useRef)(null),y=(0,o.useRef)(0),v=(0,o.useRef)(null),b=(0,o.useRef)(null);(0,o.useEffect)(()=>{v.current?.scrollTo({top:v.current.scrollHeight,behavior:"smooth"})},[m]);let w=(0,o.useCallback)(async()=>{if("idle"===s){g(null),p([]),a("connecting");try{await k();let t=await (0,l.apiRequest)(`/api/ev/voice/session-config?agentId=${encodeURIComponent(e.id)}`),s=t.publicKey?.trim(),i=t.assistantId?.trim();if(!s)throw Error("Web-call public key is missing from session config.");if(!i)throw Error("Assistant is not ready for web call yet. Please retry in a few seconds.");let n=new r.default(s);f.current=null,b.current&&(clearTimeout(b.current),b.current=null),f.current=n,n.on("call-start",()=>a("active")),n.on("call-end",()=>{a("idle"),b.current&&(clearTimeout(b.current),b.current=null),f.current=null}),n.on("volume-level",e=>c(e)),n.on("error",e=>{let t=x(e);console.error("Eburon error:",e),b.current&&(clearTimeout(b.current),b.current=null),g(t),a("idle"),f.current=null}),n.on("message",e=>{if("transcript"===e.type&&"string"==typeof e.transcript&&"final"===e.transcriptType){let t="assistant"===e.role?"assistant":"user";p(s=>[...s,{role:t,text:e.transcript,id:++y.current}])}}),await n.start(i),t.timeoutSeconds>0&&(b.current=setTimeout(()=>{f.current?.stop()},1e3*t.timeoutSeconds))}catch(e){b.current&&(clearTimeout(b.current),b.current=null),f.current?.stop(),f.current=null,a("idle"),g(e instanceof DOMException&&"NotAllowedError"===e.name?"Microphone access is blocked. Allow microphone access and try again.":e instanceof DOMException&&"NotFoundError"===e.name?"No microphone was found for this device. Connect a microphone and retry.":e instanceof Error&&e.message.trim().length>0?e.message.trim():x(e)),console.error("Failed to start web call:",e)}}},[e.id,s]),N=(0,o.useCallback)(()=>{b.current&&(clearTimeout(b.current),b.current=null),f.current?.stop(),a("idle")},[]);return(0,o.useEffect)(()=>()=>{b.current&&clearTimeout(b.current),f.current?.stop()},[]),(0,i.jsx)("div",{className:"modalOverlay",onClick:t,children:(0,i.jsxs)("div",{className:"callModal",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"callModalHead",children:[(0,i.jsxs)("h2",{className:"callModalTitle",children:["ðŸŽ™ Try â€œ",e.name,"â€"]}),(0,i.jsx)("button",{className:"callModalClose",onClick:t,children:"âœ•"})]}),(0,i.jsxs)("div",{className:"callStatus",children:[(0,i.jsxs)("div",{className:"statusVisualizers",children:[(0,i.jsxs)("div",{className:"visualizerItem",children:[(0,i.jsx)("span",{className:"visualizerLabel",children:"You"}),(0,i.jsxs)("div",{className:"visualizerContent",children:[(0,i.jsx)(d,{isActive:"active"===s}),(0,i.jsx)(u,{isActive:"active"===s,isUser:!0,size:"small"})]})]}),(0,i.jsxs)("div",{className:"visualizerItem",children:[(0,i.jsx)("span",{className:"visualizerLabel",children:"AI"}),(0,i.jsxs)("div",{className:"visualizerContent",children:[(0,i.jsx)(d,{isActive:"active"===s}),(0,i.jsx)(u,{isActive:"active"===s,isUser:!1,size:"small"})]})]})]}),(0,i.jsxs)("div",{className:"statusInfo",children:[(0,i.jsx)("span",{className:`callStatusDot ${s}`}),(0,i.jsxs)("span",{className:"callStatusLabel",children:["idle"===s&&"Ready to call","connecting"===s&&"Connectingâ€¦","active"===s&&"Call in progress"]}),"active"===s&&(0,i.jsx)("div",{className:"volumeBar",children:(0,i.jsx)("div",{className:"volumeFill","data-volume":Math.min(100*n,100)})})]})]}),(0,i.jsxs)("div",{className:"callTranscript",ref:v,children:[0===m.length&&(0,i.jsx)("p",{className:"noItems",children:"Transcript will appear here during the callâ€¦"}),m.map(e=>(0,i.jsxs)("div",{className:`txLine ${e.role}`,children:[(0,i.jsx)("div",{className:"txRole",children:e.role}),e.text]},e.id))]}),h?(0,i.jsx)("p",{className:"callError",children:h}):null,(0,i.jsxs)("div",{className:"callActions",children:["idle"===s&&(0,i.jsx)("button",{className:"startCallBtn",onClick:()=>void w(),children:"Start Call"}),"connecting"===s&&(0,i.jsx)("button",{className:"startCallBtn",disabled:!0,children:"Connectingâ€¦"}),"active"===s&&(0,i.jsx)("button",{className:"endCallBtn",onClick:N,children:"End Call"})]})]})})}function j({onClose:e}){let[t,s]=(0,o.useState)("New Assistant"),[a,n]=(0,o.useState)(null),[r,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)([]),[p,h]=(0,o.useState)(""),[g,f]=(0,o.useState)(null),[y,v]=(0,o.useState)("assistant-speaks-first"),[b,w]=(0,o.useState)("Hello! How can I assist you?"),[x,k]=(0,o.useState)("You are a helpful voice assistant.");(0,o.useEffect)(()=>{let e=!0;return(0,l.apiRequest)("/api/ev/voice/voices").then(t=>{e&&(d(t.voices),h(e=>e||t.voices[0]?.id||""))}).catch(t=>{e&&f(t.message)}),()=>{e=!1}},[]);let N=e=>{if(n(e),e){let s=m.find(t=>t.id===e);if(s){w(`Hello, this is ${t.trim()||"Assistant"}. How can I help you today?`),k(s.systemPrompt);let e=s.voice.voiceId.trim().toLowerCase(),a=u.find(t=>t.id.toLowerCase()===e||t.label.toLowerCase()===e||t.label.toLowerCase().includes(e));a&&h(a.id)}}else w("Hello! How can I assist you?"),k("You are a helpful voice assistant.")},j=async()=>{if(t.trim()){c(!0);try{await (0,l.apiRequest)("/api/ev/voice/agents",{method:"POST",body:JSON.stringify({name:t.trim(),intro:b.trim(),firstMessageMode:y,systemPrompt:x.trim(),voiceId:p||void 0})}),window.location.reload()}catch(e){alert(`Failed to create agent: ${e.message}`),c(!1)}}};return(0,i.jsx)("div",{className:"modalOverlay",onClick:e,children:(0,i.jsxs)("div",{className:"templateModal",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h2",{className:"templateModalTitle",children:"Choose a template"}),(0,i.jsx)("p",{className:"templateModalSub",children:"Pick a quickstart template or start from scratch. You can fully customize these starting prompts."}),(0,i.jsxs)("div",{className:"templateNameField",children:[(0,i.jsxs)("span",{className:"templateNameLabel",children:["Assistant Name"," ",(0,i.jsx)("span",{className:"templateNameHint",children:"(This can be adjusted at any time after creation.)"})]}),(0,i.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"e.g. Support Bot"})]}),(0,i.jsxs)("button",{className:`templateBlank${null===a?" selected":""}`,onClick:()=>N(null),children:[(0,i.jsx)("span",{className:"templateBlankIcon",children:"âŠ•"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"templateBlankName",children:"Blank Template"}),(0,i.jsx)("p",{className:"templateBlankDesc",children:"A blank slate with minimal configuration. It's a starting point for creating your custom assistant."})]})]}),(0,i.jsx)("p",{className:"templateSectionLabel",children:"Quickstart"}),(0,i.jsx)("div",{className:"templateGrid",children:m.map(e=>(0,i.jsxs)("button",{className:`templateCard${a===e.id?" selected":""}`,onClick:()=>N(e.id),children:[(0,i.jsx)("div",{className:"templateIcon",children:e.icon}),(0,i.jsx)("p",{className:"templateCardName",children:e.name}),(0,i.jsx)("p",{className:"templateCardDesc",children:e.desc})]},e.id))}),(0,i.jsxs)("div",{className:"templateEditorSection",children:[(0,i.jsx)("p",{className:"templateSectionLabel",children:"Initial Configuration"}),(0,i.jsxs)("div",{className:"templateNameField",children:[(0,i.jsx)("span",{className:"templateNameLabel",children:"Voice"}),(0,i.jsxs)("select",{"aria-label":"Select Voice",name:"voice",title:"Select Voice",value:p,onChange:e=>h(e.target.value),disabled:0===u.length,children:[0===u.length&&(0,i.jsx)("option",{value:"",children:"No approved voices found"}),u.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.label," (",e.locale,")"]},e.id))]}),g?(0,i.jsx)("p",{className:"templateInlineError",children:g}):(0,i.jsx)("p",{className:"templateFieldHint",children:"Only approved voices are shown. If none is selected, a default voice is auto-assigned."})]}),(0,i.jsxs)("div",{className:"templateNameField",children:[(0,i.jsx)("span",{className:"templateNameLabel",children:"Intro Message"}),(0,i.jsx)("textarea",{className:"templateTextArea",rows:2,value:b,onChange:e=>w(e.target.value),placeholder:"Hello! How can I assist you?"})]}),(0,i.jsxs)("div",{className:"templateNameField",children:[(0,i.jsx)("span",{className:"templateNameLabel",children:"Conversation Start"}),(0,i.jsxs)("select",{"aria-label":"Conversation Start",value:y,onChange:e=>v(e.target.value),children:[(0,i.jsx)("option",{value:"assistant-speaks-first",children:"Agent speaks first"}),(0,i.jsx)("option",{value:"assistant-waits-for-user",children:"User speaks first"})]}),(0,i.jsx)("p",{className:"templateFieldHint",children:"Controls whether the intro plays first or the user starts speaking."})]}),(0,i.jsxs)("div",{className:"templateNameField templateMarginTop",children:[(0,i.jsx)("span",{className:"templateNameLabel",children:"System Prompt"}),(0,i.jsx)("textarea",{className:"templateTextArea",rows:4,value:x,onChange:e=>k(e.target.value),placeholder:"You are a helpful voice assistant."})]})]}),(0,i.jsxs)("div",{className:"templateActions",children:[(0,i.jsx)("button",{className:"templateCloseBtn",onClick:e,children:"Close"}),(0,i.jsx)("button",{className:"templateCreateBtn",disabled:r||!t.trim(),onClick:j,children:r?"Creatingâ€¦":"Create Assistant"})]})]})})}e.s(["default",()=>h],43447)}]);