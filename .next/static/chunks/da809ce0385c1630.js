(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3171,e=>{"use strict";var a=e.i(43476),s=e.i(57688),t=e.i(22016),r=e.i(18566),i=e.i(71645),n=e.i(7471);function u(){let e=(0,r.useRouter)(),[u,l]=(0,i.useState)(""),[o,d]=(0,i.useState)(""),[c,h]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),[w,v]=(0,i.useState)(!1),f=(0,n.isSupabaseEnabled)();async function j(a){if(a.preventDefault(),!f)return void h("Supabase auth is not configured.");if(!w)return void h("Recovery session not found. Re-open the recovery email link.");if(u.length<8)return void h("Password must be at least 8 characters.");if(u!==o)return void h("Password confirmation does not match.");let s=(0,n.createClient)();if(!s)return void h("Supabase auth client is unavailable.");m(!0),h(null);try{let{error:a}=await s.auth.updateUser({password:u});if(a)return void h(a.message);await s.auth.signOut(),h("Password updated. Redirecting to login..."),window.setTimeout(()=>{e.replace("/auth")},900)}finally{m(!1)}}return(0,i.useEffect)(()=>{if(!f)return;let e=(0,n.createClient)();if(!e)return;let a=!0;e.auth.getSession().then(({data:e})=>{if(a){if(e.session)return void v(!0);h("Open this page from the password recovery email link.")}});let{data:s}=e.auth.onAuthStateChange((e,a)=>{("PASSWORD_RECOVERY"===e||a)&&(v(!0),h(null))});return()=>{a=!1,s.subscription.unsubscribe()}},[f]),(0,a.jsxs)("div",{className:"authRoot",children:[(0,a.jsx)("div",{className:"authGlow authGlowA","aria-hidden":!0}),(0,a.jsx)("div",{className:"authGlow authGlowB","aria-hidden":!0}),(0,a.jsxs)("div",{className:"authShell authResetShell",children:[(0,a.jsxs)("section",{className:"authBrandPanel",children:[(0,a.jsxs)("div",{className:"authBrandLockup",children:[(0,a.jsx)("div",{className:"authBrandBadge",children:(0,a.jsx)(s.default,{src:"https://eburon.ai/icon-eburon.svg",alt:"Eburon Voice",width:36,height:36})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"authEyebrow",children:"Eburon Voice"}),(0,a.jsx)("h1",{className:"authHeading",children:"Reset Password"})]})]}),(0,a.jsx)("p",{className:"authBrandText",children:"Create a new secure password to continue using your admin console account."})]}),(0,a.jsxs)("section",{className:"card authCardPanel",children:[(0,a.jsx)("h2",{className:"authFormTitle",children:"Set a new password"}),(0,a.jsx)("p",{className:"muted authFormCopy",children:"Use at least 8 characters. Avoid reusing previous passwords."}),f?(0,a.jsxs)("form",{className:"authForm",onSubmit:e=>void j(e),children:[(0,a.jsxs)("label",{children:["New Password",(0,a.jsx)("input",{type:"password",autoComplete:"new-password",value:u,onChange:e=>l(e.target.value),placeholder:"At least 8 characters",required:!0})]}),(0,a.jsxs)("label",{children:["Confirm New Password",(0,a.jsx)("input",{type:"password",autoComplete:"new-password",value:o,onChange:e=>d(e.target.value),placeholder:"Re-enter password",required:!0})]}),(0,a.jsx)("button",{type:"submit",disabled:p||!w,children:p?"Updating...":"Update Password"})]}):(0,a.jsx)("p",{className:"muted",children:"Supabase auth is not configured. Add `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY` in your environment."}),c?(0,a.jsx)("p",{className:"muted authStatus",children:c}):null,(0,a.jsx)("p",{className:"muted authStatus",children:(0,a.jsx)(t.default,{href:"/auth",className:"authLink",children:"Back to login"})})]})]})]})}e.s(["default",()=>u])}]);