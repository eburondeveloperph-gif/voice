(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83752,e=>{"use strict";async function t(e,t){let a=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t?.headers??{}}}),i=await a.text(),l=i?function(e){try{return JSON.parse(e)}catch{return e}}(i):null;if(!a.ok){let e="object"==typeof l&&l&&"error"in l?String(l.error):`Request failed (${a.status})`,t=function(e){if("string"==typeof e&&e.trim().length>0)return e.trim();if(Array.isArray(e)){let t=e.find(e=>"string"==typeof e&&e.trim().length>0);if(t)return t.trim()}if("object"!=typeof e||null===e)return null;let t=e.message;if("string"==typeof t&&t.trim().length>0)return t.trim();if(Array.isArray(t)){let e=t.find(e=>"string"==typeof e&&e.trim().length>0);if(e)return e.trim()}return null}("object"==typeof l&&l&&"details"in l?l.details:void 0);throw Error(t?`${e}: ${t}`:e)}return l}e.s(["apiRequest",()=>t])},55265,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(83752);function l(){let[e,l]=(0,a.useState)([]),[r,s]=(0,a.useState)([]),[n,u]=(0,a.useState)(!0),[d,c]=(0,a.useState)(""),[o,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[f,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{!async function(){try{let[e,t]=await Promise.all([(0,i.apiRequest)("/api/ev/voice/agents"),(0,i.apiRequest)("/api/ev/voice/phone-numbers")]);l(e.agents),s(t.numbers),e.agents.length>0&&h(e.agents[0].id),t.numbers.length>0&&p(t.numbers[0].id)}catch{y("Error loading configuration data.")}finally{u(!1)}}()},[]);let v=async()=>{if(!d||!o||!m)return void y("Please fill in all fields.");g(!0),y("Initiating outbound call...");try{let e=await (0,i.apiRequest)("/api/ev/voice/calls/outbound",{method:"POST",body:JSON.stringify({assistantId:o,phoneNumberId:m,customerNumber:d})});e.success&&(y(`Call successfully initiated! ID: ${e.callId}`),c(""))}catch(t){let e=t instanceof Error?t.message:"Unknown error";y(`Call failed: ${e}`)}finally{g(!1)}};return n?(0,t.jsx)("div",{className:"dialerPage",children:(0,t.jsx)("p",{className:"muted",children:"Loading dialer..."})}):(0,t.jsxs)("div",{className:"dialerPage",children:[(0,t.jsx)("header",{className:"pageHead",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"pageTitle",children:"Outbound Dialer"}),(0,t.jsx)("p",{className:"pageSubtitle",children:"Manually initiate phone calls with your voice agents."})]})}),(0,t.jsx)("div",{className:"dialerCard card",children:(0,t.jsxs)("div",{className:"fieldGrid",children:[(0,t.jsxs)("label",{children:["Destination Number",(0,t.jsx)("input",{type:"tel",placeholder:"+14150000000",value:d,onChange:e=>c(e.target.value),disabled:f})]}),(0,t.jsxs)("label",{children:["Select Agent",(0,t.jsx)("select",{value:o,onChange:e=>h(e.target.value),disabled:f,children:e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,t.jsxs)("label",{children:["From Number",(0,t.jsx)("select",{value:m,onChange:e=>p(e.target.value),disabled:f,children:r.map(e=>(0,t.jsx)("option",{value:e.id,children:e.displayNumber},e.id))})]}),(0,t.jsx)("button",{type:"button",className:"playBtn dialerBtn",onClick:v,disabled:f||0===r.length,children:f?"âŒ› Dialing...":"ðŸ“ž Start Call Now"}),b&&(0,t.jsx)("div",{className:`statusBanner ${b.includes("failed")||b.includes("Error")?"error":"success"}`,children:b})]})}),0===r.length&&(0,t.jsx)("div",{className:"warningBox",children:(0,t.jsx)("p",{children:"âš ï¸ No phone numbers available. Please purchase a number in the Numbers tab first."})})]})}e.s(["default",()=>l])}]);