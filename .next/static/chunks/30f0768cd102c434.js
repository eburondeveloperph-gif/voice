(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83752,e=>{"use strict";async function t(e,t){let r=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t?.headers??{}}}),s=await r.text(),i=s?function(e){try{return JSON.parse(e)}catch{return e}}(s):null;if(!r.ok){let e="object"==typeof i&&i&&"error"in i?String(i.error):`Request failed (${r.status})`,t=function(e){if("string"==typeof e&&e.trim().length>0)return e.trim();if(Array.isArray(e)){let t=e.find(e=>"string"==typeof e&&e.trim().length>0);if(t)return t.trim()}if("object"!=typeof e||null===e)return null;let t=e.message;if("string"==typeof t&&t.trim().length>0)return t.trim();if(Array.isArray(t)){let e=t.find(e=>"string"==typeof e&&e.trim().length>0);if(e)return e.trim()}return null}("object"==typeof i&&i&&"details"in i?i.details:void 0);throw Error(t?`${e}: ${t}`:e)}return i}e.s(["apiRequest",()=>t])},93551,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(83752);function i(){let[e,i]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[a,c]=(0,r.useState)(null);async function d(){l(!0),c(null);try{let e=await (0,s.apiRequest)("/api/ev/crm/projects");i(e.projects)}catch(e){c(e.message)}finally{l(!1)}}return(0,r.useEffect)(()=>{d()},[]),(0,t.jsxs)("div",{children:[(0,t.jsx)("header",{className:"pageHead",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"pageTitle",children:"Client CRM Portals"}),(0,t.jsx)("p",{className:"pageSubtitle",children:"CRM portals are auto-generated during user registration from company details."})]})}),(0,t.jsxs)("section",{className:"card",style:{marginBottom:14},children:[(0,t.jsx)("div",{className:"inlineActions",children:(0,t.jsx)("button",{type:"button",className:"secondary",onClick:()=>void d(),disabled:n,children:n?"Loading...":"Refresh"})}),(0,t.jsx)("p",{className:"muted",style:{marginTop:10},children:"New client CRM portals are automatically provisioned when users register with company details."}),a?(0,t.jsx)("p",{className:"muted",children:a}):null]}),(0,t.jsxs)("section",{className:"card",children:[(0,t.jsx)("h3",{style:{marginBottom:12},children:"Active Portals"}),n?(0,t.jsx)("p",{className:"muted",children:"Loading projects..."}):(0,t.jsx)("div",{className:"tableWrap",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Slug"}),(0,t.jsx)("th",{children:"Portal"}),(0,t.jsx)("th",{children:"Custom Domain"}),(0,t.jsx)("th",{children:"Leads"}),(0,t.jsx)("th",{children:"Files"}),(0,t.jsx)("th",{children:"Updated"})]})}),(0,t.jsxs)("tbody",{children:[e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{children:e.slug}),(0,t.jsx)("td",{children:(0,t.jsx)("a",{href:e.portalUrl,target:"_blank",rel:"noreferrer",children:"Open Portal"})}),(0,t.jsx)("td",{children:e.customDomain??"-"}),(0,t.jsx)("td",{children:e.leadCount}),(0,t.jsx)("td",{children:e.fileCount}),(0,t.jsx)("td",{children:new Date(e.updatedAt).toLocaleString()})]},e.id)),!e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"muted",children:"No CRM projects yet."})})]})]})})]})]})}e.s(["default",()=>i])}]);